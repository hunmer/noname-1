game.import("extension",function(lib,game,ui,get,ai,_status){return {name:"动漫",content:function(config){

},precontent:function(){
    
},help:{},config:{},package:{
    character:{
        character:{
            gancaozou:["male","wei",4,["jueduixuanxiang","shenzhu"],["des:被前任神明欺负的帅气少年，脑内时常会出现糟糕和更糟糕的选项，不选择的话头会像被挖了脑浆一样痛。目前正被现任神明和神之仆从帮助着。"]],
            neiku:["male","shu",3,["haipa"],["des:一条极度害怕被男性穿上的内裤。","unseen"]],
            yeshenyue:["male","shu",3,["shaixuan","muhou","siwangbiji"],["des:剔透玲珑，智力超群，体育全能，演技优秀，心理素质极强，近乎变态的完美主义者，为了贯彻扭曲的正义而疯狂。对世界的“无聊”感到窒息，认为世界正在腐朽，希望创造一个没有犯罪的新世界。"]],
            L:["male","wu",3,["tishen","jielu","tuili"],["des:L拥有天才的头脑和大胆的行动力，擅长推理论证，喜欢调查犯罪。2002年时L的个人能力相当于一整个搜查机关的五倍、情报机关的七倍。L拥有自由调动全世界警力的绝对权力，是这个世界最后的王牌。"]],
            qiyu:["male","qun",4,["rzyq"],["des:一个普通的光头路人。"]],
            shangwen:["male","wu",4,["dunlai","baohu","baozou"],["zhu","des:本是性格宽厚的大学生御宅族，对任何人都能礼貌相待。在遭到差别对待以及背叛之后，变得不再相信他人，人也变得粗暴了起来。名为勇者，实际上他有时的所作所为真的不愧文中他被冤枉时的称号“盾之恶魔”。"]],
            shengzai:["male","wei",4,["shenzhong"],["zhu","des:被异世界莉丝妲黛召唤而来的勇者龙宫院圣哉明明是一个实力超强的人，做事情却总是过于谨慎，用莉丝妲的话说，已经慎重到病态的地步。"]],
            lingxiaolu:["male","shu",3,["dmliyong","bujv"],["des:D班的幕后智囊，为了胜利不择手段，会利用可以利用的一切资源，不管是敌方或是友方。 在入学考试时精准地将所有考试成绩压制在50分整，常把自己是避事主义者挂在嘴上。"]],
            biqigu:["male","wei",4,["lixing","dmxisheng"],["des:是个思想貌似非常成熟的高二病患者，了解人际关系的复杂和险恶，能一眼看穿他人本质。因黑历史而习惯了受伤，对之后的处事方法有极大的影响。"]],
            zhebang:["male","wu",3,["sjxs","jieneng"],["des:拥有出色的洞察力和推理能力。人生信条是“不做也行的事情就不做，非做不可的事情一切从简”，自称“节能主义者”。"]],
            xiaotai:["male","qun",4,["saohua","dkfw"],["des:县立峰原高中二年级生，后考入横滨市立大学。是个没有智能手机的“原始人”，在图书馆遇见打扮成兔女郎的樱岛麻衣，并和她逐渐熟识。与妹妹梓川枫住在一起。情商很高。"]],
            tongren:["male","qun",4,["badao","rdl"],["des:因完全潜行正式版的SAO而被卷入死亡游戏的家伙，并以此为开端，牵扯进各种的虚拟世界事件。【技能出处：东方流星夜】"]],
            dmtiandao:["male","shu",3,["wxty","sltz"],["des:拥有制造斥力和引力的能力，在佩恩六道中担任控制任务。同时，也是长门“认定”的  “晓”之首领。"]],
            dmmiingren:["male","shu",3,["luoxuan","fenshen"],["des:为实现梦想，和守护伙伴们的羁绊，鸣人不断修炼变强，作为木叶“三忍”之一自来也的弟子，在追求梦想的过程中不断突破自我，贯彻了自身的忍道，获得人们的认可。"]],
            sidalin:["female","wei",3,["wdzs","gthl"],["des:人类统合组织苏维艾主席，最高委员会委员长。为领导全人类，实现平等，步入幸福世界的使命所驱使的少女。 提出了否定个人资产的“共有主义” ，并通过革命推翻了原来的王国，成为了国家最高领导者。 "]],
            xitele:["female","qun",3,["hkj","sdz"],["des:德古志第三帝国总统兼偶像。 公认的宇宙第一天才。因此使第三帝国的政治、经济、发明、军事及其他方面产生了戏剧性的发展。 另一方面，她爱美又疏于与人交际，借助于戈培尔的计划才成就如今的地位。 "]],
            tiancaoxiao:["female","wu",3,["hdz","wangxiang","dmhanyang"],["des:学生会会长。容姿端丽，才色兼备，不仅运动神经超群，家事、礼法也样样精通的完美人物。但非常容易想歪，具有妄想癖。对自己较小的胸部很烦恼。有恐高症、喜欢祭奠活动等这些孩子气的一面。不懂电脑，耳朵敏感(色情方面)。从“一被很多人盯着，就会兴奋起来”、“露出玩法就要提心吊胆不让别人看见才刺激”的发言看来，有M的可能性。"]],
            dagu:["male","shu",3,["fjzh","xiwang"],["des:原本是TPC运输部的工作人员，因救了泽井总监一命而被他看中，调入GUTS。 他继承了超古代战士的基因，所以可以和迪迦的石像结合，变成光，让沉睡的迪迦奥特曼觉醒。他是一个很热心并且心地很好的人。"]],
            xueyuanzhiqing:["female","qun",3,["ltpd","chuanjiao"],["des:时冈学园2年级学生。 学生会副会长，扰遍大街小巷的下流梗恐怖集团“SOX”的首领“雪原之青”。 现在正突破了监控散布下流梗。正常状态下是一位一本正经的大和抚子，变态状态下是能够吧唧吧唧三分钟黄段子的胖次超人。因为从小就喜欢黄段子，所以父亲送给她一款停   止流通的旧式手机，可以通过向特定号码通信而使PM无效三分钟，让她发泄黄段子。"]],
            naiyazi:["female","qun",3,["ningshi","fengkuang"],["des:本名奈亚拉托提普，是克苏鲁神话中的外神。为从宇宙人口贩卖组织中保护高中生八坂真寻而来到地球，后对八坂真寻产生很深的感情，最终修成正果。爱好是动漫、游戏等二次元宅物。"]],
            ban:["male","shu",4,["sszs","lyfg","hhq","xznh"],["zhu","des:宇智波一族的前任首领，不仅是前任六道仙人长子因陀罗的转世者，还是曾经的宇智波最强者。"]],
            sanli:["female","wu",3,["ltjd","qiege"],["des:流着东洋人血统，是个沉默寡言、表情稀少的少女。以第104期训练兵团首席的身份毕业，性格沉稳冷静，有以一敌百的战斗力。"]],
            youmaguijiang:["male","qun",4,["ixa","mingshen"],["zhu","des:出身自白日庭的半人类，CCG的最高战力，被称作“不败的喰种搜查官”；同时有着“白色死神”之称，V的一员，上一任的独眼王。"]],
            fangcunaite:["female","wu",5,["zengzhi","shishi","dmbenghuai"],["des:体形十分娇小，头发凌乱。人格极为复杂，有作为人类的知性与感情，也有作为喰种的残酷与肆虐；似乎对什么都感到无所谓，但却从未有人能够洞悉她的一言一行，同时也有着娇小美丽的外貌截然相反的可怕实力。"]],
            kazi:["male","shen",4,["dmjinhua"],["des:2000年前陷入沉睡的柱之男一族的天才，石鬼面的制造者，借由艾哲红石和石鬼面进化为了究极生物。"]],
            gblss:["male","shu",4,["jiedan","wjtl"],["des:\"我不拯救世界，我只杀哥布林。\""]],
            ktctl:["male","wei",4,["olol","thewhord"],["des:“真是够了。”"]],
            dijia:["male","shu",105,["atgx","bhxt","jsq"],["forbidai","des:迪迦·奥特曼是超古代时期就出现在地球的巨人，但并非是地球出生的奥特曼，他原本是和三个黑暗巨人在一起的邪恶奥特曼，也是其中的领袖，后在超古代时期的地球警备队队长幽怜的劝说下弃暗投明， 他吸收了三个同伴的力量再封印了他们，最终成为光之巨人迪迦·奥特曼。","unseen"]],
            zmtzl:["male","wu",4,["szhx","zg"],["des:鬼杀队剑士，善良温柔的少年，左额处有伤疤。为了拯救变成鬼的妹妹灶门祢豆子，在讨伐恶鬼的同时，不断地搜寻着仇敌鬼舞辻无惨。"]],
            yaochen:["male","qun",3,["ly","shoutu"],["des:药尘的名字取自“愿世间无人病，愿架上药生尘”  ，出身于药族卑微旁支，幼年丧父，受尽冷眼，更因在药会上展露锋芒而被陷害，逐出药族。经历种种磨难和奇遇之后终于进阶为中州大陆“第一炼药师”，然而却因为徒弟的背叛而尸骨无存。"]],
            xiyangyang:["male","wei",3,["sikao","bengpao"],["des:青青草原羊村的绵羊，大肥羊学校的学生，村长慢羊羊的得力助手，父母因在外太空工作而将其托付给村长慢羊羊收养。他在羊村里是最机智聪明的羊，也是羊村跑的最快的羊。多次拯救了羊族，是羊村的小英雄。  【代码:阿七】"]],
            xuanyue:["male","qun",4,["jskz"],["des:玄月是在漫画《偷星九月天》中登场的虚拟人物，黑月铁骑之一。性格温柔体贴，气质优雅高贵，有着天生的皇者威慑力，是个令人感到心安的好哥哥。而作为路西法时则残忍无情，睿智多谋，唯对沧月极其温柔，微笑间常伴着鲜血的飞溅，是一个令人心悸的恶魔。"]],
            shengzhu:["male","wu","4/12",["ffengyin","dmjiefeng"],["des:这是一尊会说话的恶魔雕像。"]],
            luluxiu:["male","wei",3,["qiyue","dmbiange"],["des:鲁路修·兰佩路基，本名鲁路修·Vi·不列颠尼亚，日本动画《CODE GEASS 反叛的鲁路修》系列的男主角，实际上是神圣布里塔尼亚帝国的第11皇子，阿什弗德学园学生会副会长，也是黑色骑士团的领导人zero，神圣布里塔尼亚帝国第99代皇帝。 在一次意外中，濒死之际获得了神秘少女C.C.赋予的Geass之力，发誓要粉碎神圣布里塔尼亚帝国，最终与枢木朱雀、C.C.制定了“零之镇魂曲”计划。"]],
            bzhw:["female","shu",3,["renfeng","dmyanwu","dmyuhuo"],["des:不知火舞是不知火流派的当家忍者之一，《饿狼传说》二号男主角安迪·伯加德的女友。也是拳皇系列女性格斗家队伍的常驻成员之一。"]],
            emshengzhu:["male","wu",12,["emzl"],["des:很显然，他已经不再是一坨雕像了。","unseen"]],
            dmlgcr:["female","wei",3,["dnskzd","jjpy"],["des:SOS团的团长，不知为何拥有能够改变世界能力的少女。拥有在无意识的情况下实现自己愿望的能力，虽然说只要她所希望的事，什么都能实现，但是可能受到春日“事实上那是不可能的”这种正常的思考方式的影响，她的想法好像不是全部能实现的样子。"]],
            dmsuolong:["male","wu",4,["dmfanteng","dmzhuisha"],["des:使用三把刀战斗的三刀流剑士。立志成为世界第一大剑豪。之后加入“草帽一伙” ，随着“草帽一伙”以成为世界第一大剑豪的目标旅行。"]],
            dmqierbang:["male","qun",4,["dmlaoda","dmkawayi","dmliangkuai","dmcainiao"],["des:一个无所不能的特工小队，由领导者\"老大\"、军火库\"凉快\"、智囊\"卡哇伊\"和吉祥物\"菜鸟\"组成。"]],
            dmguimuguima:["male","shu",3,["dmglzs","dmszsj"],["des:人称攻略之神的Galgame达人高中生。绝招（攻略之神模式）是同时攻略6部游戏，极限是同时攻略24部ADV游戏，无意中回了大骷髅寄过来的邮件而签订契约，成为帮助艾露西捕获驱魂的协力者。活用Galgame的知识攻略现实的女生，在任何情况下都能够保持绝对的冷静和攻略中的感性。"]],
            dmyueqianlongma:["male","wei",4,["dmtiaoxin","dmsuibu"],["des:曾经在美国夺得青少年网球四连霸的网球天才。被誉为天才少年，跟家人回国后，加入以网球闻名的“青春学园”国中部。越前龙马加入不久后便顺利成为“青春学园”的首位一年级正选球员，与前辈们一起参加东京都地区预选赛、东京都大赛、关东大赛、全国大赛，最终让青学夺得全国大赛冠军。网球界别名“王子”。"]],
            dmfeicunjianxin:["male","shu","3/4",["dmqsyz","dmszjw"],["des:绯村剑心，飞天御剑流十四代继承人。绰号“刽子手拔刀斋”，因剑术高超，杀人不眨眼，而使敌人闻风丧胆。 明治十一年东京出现了一个浪人，一头红发，左颊有一个“十”字刀伤，手持一把逆刃刀，专门锄强扶弱。传说中的“拔刀斋”又出现了，但却发誓不再杀人，而是要保护身边的朋友亲人，维护这个社会的和平。"]],
            dmkaaosi:["female","wu",4,["dmzjsam","dmxingfen"],["des:第二代万用天使，型号ε，看起来充满恐怖气息的修女装萝莉。实力超强，在前期因为没有学习道德，能做出非常残酷的事。"]],
            dmyou:["female","wei",3,["dmyanling","dmbanjia","dmfuhuo"],["des:动漫作品《这样算是僵尸吗？》中的女主角之一，银色长发闪烁动人，身穿防护手套和板甲，有着蓝色瞳孔，仿佛像是人偶般的少女。于5月26日在便利商店的停车场里认识了相川步，并觉得步是一个特殊的存在。在步被杀后，把步变成了僵尸，同时也最喜欢步。"]],
            dmyoulingji:["female","qun",3,["dmhxyyzsn","dmgss"],["des:害羞幽灵王是马力欧系列中路易吉洋馆系列的最终BOSS。害羞幽灵的王者。害羞幽灵日语原名为テレサ(Teresa)，来源于日语的害羞——てれ(tere)。其特征为在玩家背对它时会高速接近玩家，而转身面对它时就会害羞的捂脸并停止动作，直到重新背对其一段时间后才会继续追击玩家。"]],
        },
        translate:{
            gancaozou:"甘草奏",
            neiku:"内裤",
            yeshenyue:"夜神月",
            L:"L",
            qiyu:"琦玉",
            shangwen:"尚文",
            shengzai:"圣哉",
            lingxiaolu:"绫小路",
            biqigu:"比企谷",
            zhebang:"折棒",
            xiaotai:"咲太",
            tongren:"桐人",
            dmtiandao:"天道",
            dmmiingren:"鸣人",
            sidalin:"卡特琳",
            xitele:"莉莎",
            tiancaoxiao:"天草筱",
            dagu:"大古",
            dijia:"迪迦",
            xueyuanzhiqing:"教主",
            naiyazi:"奈亚子",
            ban:"斑爷",
            sanli:"三笠",
            youmaguijiang:"贵将",
            fangcunaite:"艾特",
            kazi:"卡兹",
            gblss:"小鬼杀手",
            ktctl:"承太郎",
            zmtzl:"炭治郎",
            yaochen:"药尘",
            xiyangyang:"喜羊羊",
            xuanyue:"玄月",
            shengzhu:"圣主",
            luluxiu:"鲁路修",
            bzhw:"不知火舞",
            emshengzhu:"恶魔圣主",
            dmlgcr:"凉宫春日",
            dmsuolong:"索隆",
            dmqierbang:"企鹅特工",
            dmguimuguima:"桂木桂马",
            dmyueqianlongma:"越前龙马",
            dmfeicunjianxin:"绯村剑心",
            dmkaaosi:"卡奥斯",
            dmyou:"优",
            dmyoulingji:"幽灵姬",
        },
    },
    card:{
        card:{
        },
        translate:{
        },
        list:[],
    },
    skill:{
        skill:{
            "shenzhong2":{
                trigger:{
                    player:"useCard",
                },
                silent:true,
                filter:function(event,player){
        return get.type(event.card)=='equip'&&player.storage.shenzhong<10;
    },
                content:function(){
        player.storage.shenzhong++;
        player.updateMarks();
    },
                forced:true,
                popup:false,
            },
            "badao_2":{
                trigger:{
                    target:"useCardToBegin",
                },
                direct:true,
                filter:function(event,player){
        return event.skill && event.skill == 'badao';
    },
                content:function(){
        "step 0"
        player.addTempSkill('badao_3');
    },
            },
            "badao_3":{
                trigger:{
                    player:"gainBegin",
                },
                forced:true,
                popup:false,
                filter:function(event,player){
        console.log(event);
        return true;
    },
                content:function(){
        player.addTempSkill('zhan');
        if(!player.storage.badao){
            player.storage.badao=[];
        }
        for(var i=0;i<trigger.cards.length;i++){
            player.storage.badao.add(trigger.cards[i]);
        }
        player.showCards(trigger.cards);
        player.removeSkill('badao_3');
    },
            },
            jueduixuanxiang:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"useCard",
                },
                forced:true,
                nobracket:true,
                round:1,
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='sha';
return Math.random()<=
parseInt(Math.random()*(100+1),10)/100;
},
                content:function(){
              "step 0"
            trigger.player.chooseToDiscard('贴着鼻子使劲闻捡到的色情杂志；把色情杂志吃掉').set('ai',function(card){
                var trigger=_status.event.getTrigger();         
            });
            "step 1"
            if(result.bool==false) player.loseHp();
        "step 2"
                player.logSkill('caonima');
    },
                group:["jueduixuanxiangtwo","jueduixuanxiangtree","jueduixuanxiangfour","jueduixuanxiangfive","jueduixuanxiangsix","jueduixuanxiang_roundcount"],
            },
            caonima:{
                audio:"ext:动漫:1",
            },
            jueduixuanxiangtwo:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"useCard",
                },
                forced:true,
                round:1,
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='shan';
return Math.random()<=
parseInt(Math.random()*(100+1),10)/100;
},
                content:function(){
              "step 0"
            trigger.player.chooseToDiscard(1,'脱光衣服像个昭和男儿一样大叫；趴在讲台上模仿受私刑的猪嚎叫十次').set('ai',function(card){
                var trigger=_status.event.getTrigger();         
            });
            "step 1"
            if(result.bool==false) player.turnOver();
        "step 2"
                player.logSkill('caonima');
    },
                group:["jueduixuanxiang_roundcount","jueduixuanxiangtwo_roundcount"],
            },
            jueduixuanxiangtree:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"useCard",
                },
                forced:true,
                round:1,
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='tao';
return Math.random()<=
parseInt(Math.random()*(100+1),10)/100;
},
                content:function(){
              "step 0"
            trigger.player.chooseToDiscard(1,'脱下自己的内裤塞进嘴里；干脆变成内裤算了').set('ai',function(card){
                var trigger=_status.event.getTrigger();         
            });
            "step 1"
            if(result.bool==false) player.init('neiku'); 
        "step 2"
                player.logSkill('caonima');
    },
                group:["jueduixuanxiang_roundcount","jueduixuanxiangtwo_roundcount","jueduixuanxiangtree_roundcount"],
            },
            jueduixuanxiangfour:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"useCard",
                },
                forced:true,
                round:1,
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='wuxie';
return Math.random()<=
parseInt(Math.random()*(100+1),10)/100;
},
                content:function(){
              "step 0"
            trigger.player.chooseToDiscard(1,'大声喊请让我捏你的乳头吧;捏自己乳头请求和解').set('ai',function(card){
                var trigger=_status.event.getTrigger();         
            });
            "step 1"
            if(result.bool==false) player.loseHp();
        "step 2"
                player.logSkill('caonima');
    },
                group:["jueduixuanxiang_roundcount","jueduixuanxiangfour_roundcount"],
            },
            shenzhu:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"useCardAfter",
                },
                forced:true,
                usable:1,
                filter:function(event,player){
return Math.random()<=
parseInt(Math.random()*(100+1),10)/100;
},
                content:function(){
        player.draw(3);
        player.recover();
    },
                intro:{
                    content:"card",
                },
            },
            siwangbiji:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseUseBegin",
                },
                direct:true,
                nobracket:true,
                intro:{
                    content:"cards",
                },
                init:function (player){
        player.storage.siwangbiji=[];
    },
                content:function (){
        'step 0'
        player.chooseCard(get.prompt2('siwangbiji')).set('ai',function(card){
            var player=_status.event.player;
            for(var i=0;i<player.storage.siwangbiji.length;i++){
                if(get.suit(player.storage.siwangbiji[i])==get.suit(card)) return 0;
            }
            if(player.storage.siwangbiji.length==2){
                if(!game.hasPlayer(function(current){
                    return (current!=player&&
                        get.damageEffect(current,player,player)>0&&
                        get.attitude(player,current)<0)
                })) return 0;
            }
            return 7-get.value(card);
        });
        'step 1'
        if(result.bool){
            player.logSkill('siwangbiji');
            if(player.storage.siwangbiji.length<3){
                player.$give(result.cards,player);
            }
            player.lose(result.cards,ui.special,'toStorage');
            player.storage.siwangbiji=player.storage.siwangbiji.concat(result.cards);
            player.markSkill('siwangbiji');
            player.syncStorage('siwangbiji');
        }
        else{
            event.finish();
        }
        'step 2'
        var suitlist=[];
        for(var i=0;i<player.storage.siwangbiji.length;i++){
            if(!suitlist.contains(get.suit(player.storage.siwangbiji[i]))){
                suitlist.push(get.suit(player.storage.siwangbiji[i]));
            }
        }
        if(suitlist.length==4){
            player.logSkill('xuangaosiwang');
            player.chooseButton(['死亡笔记',player.storage.siwangbiji],true,4).set('filterButton',function(button){
            if(ui.selected.buttons.length){
                for(var i=0;i<ui.selected.buttons.length;i++){
                    if(get.suit(ui.selected.buttons[i])==get.suit(button.link)) return false;
                }
            }
            return true;
        }).set('ai',function(button){
            return 1;
        });
        }
        else{
            event.finish();
        }
        'step 3'
        if(result.links){
            player.$throw(result.links);
            for(var i=0;i<result.links.length;i++) player.storage.siwangbiji.remove(result.links[i]);
            game.cardsDiscard(result.links);
            player.syncStorage('siwangbiji');
            player.updateMarks('siwangbiji');
            if(!player.storage.siwangbiji.length) player.unmarkSkill('siwangbiji');
            player.chooseTarget(function(card,player,target){
                return target!=player;
            },'令一名其他角色失去999点体力').set('ai',function(target){
                var player=_status.event.player;
                if(get.attitude(player,target)>0) return -1;
                return get.damageEffect(target,player,player)*target.sex=='male'?9999:9999+target.countCards('e')/2;
            });
        }
        'step 4'
        if(result.bool){
            var target=result.targets[0];
            var num=target.sex=="male"?9999:9999;
            target.loseHp(999);
            
            event.target=target;
            player.line(target,'green');
        }
        else{
            event.finish();
        }
        'step 5'
        if(event.target&&event.target.isAlive()){
            var es=event.target.getCards('e');
            if(es.length){
                event.target.discard(es);
            }
        }
    },
                ai:{
                    threaten:4,
                },
            },
            xuangaosiwang:{
                audio:"ext:动漫:1",
            },
            jueduixuanxiangsix:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"useCard",
                },
                forced:true,
                round:1,
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='zhuge';
return Math.random()<=
parseInt(Math.random()*(100+1),10)/100;
},
                content:function(){
              "step 0"
            trigger.player.chooseToDiscard(3,'在讲台上跳俄罗斯果帕克舞；身高降低一个脑袋的高度').set('ai',function(card){
                var trigger=_status.event.getTrigger();         
            });
            "step 1"
            if(result.bool==false) player.loseMaxHp();
        "step 2"
                player.logSkill('caonima');
    },
                group:["jueduixuanxiangsix_roundcount"],
            },
            shaixuan:{
                trigger:{
                    player:"phaseDrawBefore",
                },
                content:function(){
        "step 0"
        event.cards=get.cards(3);
        player.chooseCardButton(event.cards,1,'选择一张牌置于牌堆顶',true).set('ai',ai.get.buttonValue);
        "step 1"
        if(result.bool){
            var choice=[];
            for(var i=0;i<result.links.length;i++){
                choice.push(result.links[i]);
                cards.remove(result.links[i]);
            }
            for(var i=0;i<cards.length;i++){
                ui.cardPile.appendChild(cards[i]);
            }
            while(choice.length){
                ui.cardPile.insertBefore(choice.pop(),ui.cardPile.firstChild);
            }
        }
    },
            },
            muhou:{
                trigger:{
                    global:"useCard",
                },
                forced:true,
                filter:function (event,player,card){
        if(get.color(event.card)!='black') return false;
        return event.card.name=='nanman'&&player!=event.player||event.card.name=='wanjian'&&player!=event.player||event.card.name=='taoyuan'&&player.hp<player.maxHp||event.card.name=='wugu';
    },
                content:function(){},
                mod:{
                    targetEnabled:function(card){
            if((get.type(card)=='trick'||get.type(card)=='delay')&&
                get.color(card)=='black') return false;
        },
                },
            },
            jielu:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"die",
                },
                direct:true,
                forceDie:true,
                skillAnimation:true,
                animationColor:"wood",
                content:function (){
        "step 0"
        player.chooseTarget(get.prompt2('jielu'),function(card,player,target){
            return player!=target
        }).set('forceDie',true).set('ai',function(target){
            var num=get.attitude(_status.event.player,target);
            return -num;
        });
        "step 1"
        if(result.bool){
            var target=result.targets[0];
            player.logSkill('jielu',target);
            player.line(target,'green');
            target.recover(999);
            target.addSkill('bbaoguang');
        }
    },
                ai:{
                    expose:0.5,
                },
            },
            tuili:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"useCard",
                },
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='sha';
    },
                content:function(){
        player.gain(get.cardPile(function(card){
            return get.type(card,'trick')=='trick';
        }),'gain2');
    },
                ai:{
                    order:10,
                    result:{
                        player:1,
                    },
                },
            },
            jueduixuanxiangfive:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"useCard",
                },
                forced:true,
                round:1,
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='jiu';
return Math.random()<=
parseInt(Math.random()*(100+1),10)/100;
},
                content:function(){
              "step 0"
            trigger.player.chooseToDiscard(1,'喊出最喜欢的历史人物并三点倒立；身高降低一个脑袋的高度').set('ai',function(card){
                var trigger=_status.event.getTrigger();         
            });
            "step 1"
            if(result.bool==false) player.loseMaxHp();
        "step 2"
                player.logSkill('caonima');
    },
                group:["jueduixuanxiangsix_roundcount","jueduixuanxiangfive_roundcount"],
            },
            shenzhong:{
                audio:"ext:动漫:2",
                init:function(player){
        player.storage.shenzhong=0;
    },
                mark:true,
                intro:{
                    content:function(storage){
            if(storage==0) return '未使用过装备牌';
            return '已使用过'+storage+'张装备牌';
        },
                },
                group:"shenzhong2",
                trigger:{
                    player:"phaseUseBegin",
                },
                frequent:true,
                filter:function(event,player){
        return player.storage.shenzhong>0;
        
    },
                content:function(){    
        'step 0'
        player.draw(player.storage.shenzhong);
        'step 1'
       var num=player.storage.shenzhong-1;
        player.chooseToDiscard('he',num,true);
        'step 2'
        var useCard=false;
        if(result.bool&&result.cards){
            for(var i=0;i<result.cards.length;i++){
                if(result.cards[i].original=='e'){
                    useCard=true;break;
                }
            }
        }
        if(useCard){
                            var card=get.cardPile('wuxie','field');
        if(card){
            player.gain(card,'gain2','log');
        }
        }
    },
                ai:{
                    threaten:function(player,target){
            if(typeof target.storage.shenzhong=='number'){
                return Math.min(2,Math.sqrt(1+target.storage.shenzhong));
            }
        },
                },
            },
            dunlai:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseBegin",
                },
                forced:true,
                content:function(){
        "step 0"
        player.disableEquip(1);
        "step 1"
        var card=get.cardPile('renwang','field');
        if(card){
            player.gain(card,'gain2','log');
        }
    },
            },
            baohu:{
                audio:"ext:动漫:2",
                trigger:{
                    global:"useCardToTargeted",
                },
                filter:function(event,player){
        return event.card.name=='sha'&&get.distance(player,event.target)<=1;
    },
                check:function(event,player){
        return get.attitude(player,event.target)>=0;
    },
                content:function(){
        "step 0"
        player.draw();
        if(trigger.target!=player){
            player.chooseCard(true,'he','交给'+get.translation(trigger.target)+'一张牌').set('ai',function(card){
                if(get.position(card)=='e') return -1;
                if(card.name=='shan') return 1;
                if(get.type(card)=='equip') return 0.5;
                return 0;
            });
        }
        else{
            event.finish();
        }
        "step 1"
        trigger.target.gain(result.cards,player,'give');
        game.delay();
        event.card=result.cards[0];
        "step 2"
        if(trigger.target.getCards('h').contains(card)&&get.type(card)=='equip'){
            trigger.target.chooseUseTarget(card);
        }
    },
                ai:{
                    threaten:1.1,
                },
            },
            bujv:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseEnd",
                },
                frequent:true,
                filter:function(event,player){
        return player.countCards('h')<game.countGroup();
    },
                content:function(){
        player.draw(game.countGroup()-player.countCards('h'));
    },
                ai:{
                    threaten:1.3,
                },
            },
            haipa:{
                forced:true,
                trigger:{
                    global:"useCardToTargeted",
                },
                filter:function(event,player){
        return event.card.name=='sha'&&get.distance(player,event.target)<1;
    },
                check:function(event,player){
        return get.attitude(player,event.target)=0;
    },
                content:function(){
        player.draw();
    },
            },
            lixing:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"damageEnd",
                },
                frequent:true,
                filter:function (event){
        return (event.num>0)
    },
                content:function (){
        "step 0"
        event.count=1;
        "step 1"
        player.draw(2);
        event.given=0;
        "step 2"
        player.chooseCardTarget({
            filterCard:true,
            selectCard:[1,2-event.given],
            filterTarget:function(card,player,target){
                return player!=target&&target!=event.temp;
            },
            ai1:function(card){
                if(ui.selected.cards.length>0) return -1;
                if(card.name=='du') return 20;
                return (_status.event.player.countCards('h')-_status.event.player.hp);
            },
            ai2:function(target){
                var att=get.attitude(_status.event.player,target);
                if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
                    if(target.hasSkillTag('nodu')) return 0;
                    return 1-att;
                }
                return att-4;
            },
            prompt:'请选择要送人的卡牌'
        });
        "step 3"
        if(result.bool){
            player.line(result.targets,'green');
            result.targets[0].gain(result.cards,player,'giveAuto');
            event.given+=result.cards.length;
            if(event.given<2){
                event.temp=result.targets[0];
                event.goto(2);
            }
            else if(event.count<trigger.num){
                delete event.temp;
                event.count++;
                event.goto(1);
            }
        }
        else if(event.count<trigger.num){
            delete event.temp;
            event.num=1;
            event.count++;
            event.goto(1);
        }
    },
                ai:{
                    maixie:true,
                    "maixie_hp":true,
                    result:{
                        effect:function (card,player,target){
                if(get.tag(card,'damage')){
                    if(player.hasSkillTag('jueqing',false,target)) return [1,-2];
                    if(!target.hasFriend()) return;
                    var num=1;
                    if(get.attitude(player,target)>0){
                        if(player.needsToDiscard()){
                            num=0.7;
                        }
                        else{
                            num=0.5;
                        }
                    }
                    if(player.hp>=4) return [1,num*2];
                    if(target.hp==3) return [1,num*1.5];
                    if(target.hp==2) return [1,num*0.5];
                }
            },
                    },
                    threaten:0.6,
                },
            },
            sjxs:{
                trigger:{
                    player:["phaseBefore","equipAfter","loseAfter"],
                },
                forced:true,
                nobracket:true,
                popup:false,
                derivation:["zkeji","zshaixuan","ztuili","zjizhi"],
                filter:function(event,player){
        if(player.equiping) return false;
        var suits=[];
        var es=player.getCards('e');
        for(var i=0;i<es.length;i++){
            suits.add(get.suit(es[i]));
        }
        if(player.additionalSkills.sjxs){
            return player.additionalSkills.sjxs.length!=suits.length;
        }
        else{
            return suits.length>0;
        }
    },
                content:function(){
        var suits=[];
        var es=player.getCards('e');
        for(var i=0;i<es.length;i++){
            suits.add(get.suit(es[i]));
        }
        player.removeAdditionalSkill('qizhou');
        switch(suits.length){
            case 1:player.addAdditionalSkill('sjxs',['zkeji']);break;
            case 2:player.addAdditionalSkill('sjxs',['zkeji','zshaixuan']);break;
            case 3:player.addAdditionalSkill('sjxs',['zkeji','zshaixuan','ztuili']);break;
            case 4:player.addAdditionalSkill('sjxs',['zkeji','zshaixuan','ztuili','zjizhi']);break;
        }
    },
                ai:{
                    threaten:1.2,
                },
            },
            zkeji:{
                audio:"ext:动漫:2",
                audioname:["re_lvmeng","sp_lvmeng"],
                trigger:{
                    player:"phaseDiscardBefore",
                },
                frequent:function(event,player){
        return player.needsToDiscard();
    },
                filter:function(event,player){
        return player.countUsed('sha')==0;
    },
                content:function(){
        trigger.cancel();
    },
            },
            zshaixuan:{
                trigger:{
                    player:"phaseDrawBefore",
                },
                content:function(){
        "step 0"
        event.cards=get.cards(3);
        player.chooseCardButton(event.cards,1,'选择一张牌置于牌堆顶',true).set('ai',ai.get.buttonValue);
        "step 1"
        if(result.bool){
            var choice=[];
            for(var i=0;i<result.links.length;i++){
                choice.push(result.links[i]);
                cards.remove(result.links[i]);
            }
            for(var i=0;i<cards.length;i++){
                ui.cardPile.appendChild(cards[i]);
            }
            while(choice.length){
                ui.cardPile.insertBefore(choice.pop(),ui.cardPile.firstChild);
            }
        }
    },
            },
            ztuili:{
                trigger:{
                    player:"useCard",
                },
                logTarget:"player",
                filter:function(event,player){
                return event.card.name=='sha';
    },
                content:function(){
        player.gain(get.cardPile(function(card){
            return get.type(card,'trick')=='trick';
        }),'gain2');
    },
                ai:{
                    order:10,
                    result:{
                        player:1,
                    },
                },
            },
            zjizhi:{
                trigger:{
                    player:"useCard",
                },
                frequent:true,
                filter:function(event){
        return (get.type(event.card)=='trick'&&(!event.cards.length||event.cards[0]&&event.cards[0]==event.card));
    },
                content:function(){
        player.draw();
    },
                ai:{
                    threaten:1.4,
                    noautowuxie:true,
                },
            },
            jieneng:{
                audio:"ext:动漫:3",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                forced:true,
                content:function(){
        player.draw(2);
    },
                group:"bjieneng",
            },
            bjieneng:{
                trigger:{
                    player:"phaseDrawBegin",
                },
                forced:true,
                content:function(){
        trigger.num--;
    },
                ai:{
                    threaten:1.3,
                },
            },
            qizi:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                forced:true,
                content:function(){
        player.loseHp();
         player.removeSkill("qizi");
    },
            },
            jiaoshe:{
                enable:"phaseUse",
                usable:1,
                filterTarget:function(card,player,target){
        return target!=player&&target.countCards('h');
    },
                filter:function(event,player){
        return player.countCards('h');
    },
                content:function(){
        'step 0'
        player.chooseToCompare(target);
        'step 1'
        if(result.bool){
        }
        'step 2'
                if(!result.bool){
        }
    },
                ai:{
                    order:8,
                    result:{
                        target:function(player,target){
                return get.damageEffect(target,player,target);
            },
                    },
                },
            },
            tishen:{
                audio:"ext:动漫:1",
                unique:true,
                enable:"chooseToUse",
                mark:true,
                skillAnimation:true,
                animationStr:"替身",
                limited:true,
                animationColor:"orange",
                init:function(player){
        player.storage.oldniepan=false;
    },
                filter:function(event,player){
        if(player.storage.oldniepan) return false;
        if(event.type=='dying'){
            if(player!=event.dying) return false;
            return true;
        }
        return false;
    },
                content:function(){
        'step 0'
        player.awakenSkill('oldniepan');
        player.storage.oldniepan=true;
        player.discard(player.getCards('hej'));
        'step 1'
        if(player.hp<3){
            player.recover(3-player.hp);
        }
        'step 2'
        player.draw(3);
        'step 3'
        player.link(false);
        'step 4'
        player.turnOver(false);
    },
                ai:{
                    order:1,
                    skillTagFilter:function(player){
            if(player.storage.oldniepan) return false;
            if(player.hp>0) return false;
        },
                    save:true,
                    result:{
                        player:function(player){
                if(player.hp==0) return 10;
                if(player.hp<=2&&player.countCards('he')<=1) return 10;
                return 0;
            },
                    },
                    threaten:function(player,target){
            if(!target.storage.oldniepan) return 0.6;
        },
                },
                intro:{
                    content:"limited",
                },
            },
            saohua:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"damageEnd",
                },
                filter:function(event,player){
        return event.source&&event.source.isIn()&&event.source!=player&&!event.source.hasJudge('lebu');
    },
                check:function(event,player){
        return get.attitude(player,event.source)<=0;
    },
                logTarget:"source",
                content:function(){
        var card=game.createCard('lebu');
        trigger.source.addJudge(card);
        trigger.source.$draw(card);
        game.delay();
    },
                ai:{
                    threaten:4,
                },
            },
            dkfw:{
                audio:"ext:动漫:2",
                enable:"phaseUse",
                usable:1,
                filterTarget:function (card,player,target){
    return target != player;
    },
                content:function (){
        'step 0'
        target.draw();
        'step 1'
        var card=result[0];
        if(card&&game.hasPlayer(function(current){
            return target.canUse(card,current);
        })&&get.owner(card)==target){
            target.chooseToUse({
                prompt:'是否使用'+get.translation(card)+'？',
                filterCard:function(cardx,player,target){
                    return cardx==_status.event.cardx;
                },
                cardx:card,
            });
        }
    },
                ai:{
                    order:7.5,
                    result:{
                        target:1,
                    },
                },
            },
            badao:{
                audio:"ext:动漫:1",
                group:["badao_2"],
                enable:"phaseUse",
                viewAs:{
                    name:"wuzhong",
                },
                usable:1,
                position:"he",
                filterCard:true,
                viewAsFilter:function(player){
        return player.countCards('he')>0;
    },
                check:function(card){
        return 7-get.value(card);
    },
                ai:{
                    basic:{
                        order:7.2,
                        useful:4.5,
                        value:9.2,
                    },
                    result:{
                        target:2,
                    },
                    tag:{
                        draw:2,
                    },
                },
            },
            wxty:{
                audio:"ext:动漫:1",
                enable:"phaseUse",
                usable:1,
                nobracket:true,
                filterTarget:function (card,player,target){
    return player!=target },
                content:function (){
        "step 0"
            var card=target.getCards('hej').randomGet();
            player.gain(card,target,'giveAuto','bySelf');
        "step 1"
                player.storage.sltz--;
        player.markSkill('sltz');
        game.addVideo('storage',player,['sltz',player.storage.sltz]);
    },
                ai:{
                    order:9,
                    result:{
                        target:function (player,target){
                var numj=target.countCards('j');
                var numhe=target.countCards('he');
                if(numhe==0) return 6;
                return -6+(numj+1)/numhe;
            },
                    },
                    threaten:1.1,
                },
            },
            sltz:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseDrawBefore",
                },
                mark:true,
                unique:true,
                nobracket:true,
                intro:{
                    content:function(storage){
            if(storage>0){
                return '防御距离+'+storage;
            }
            else if(storage<0){
                return '防御距离'+storage;
            }
            else{
                return '无距离变化';
            }
        },
                },
                init:function(player){
        player.storage.sltz=0;
    },
                check:function(event,player){
        if(player.countCards('h')>player.hp) return true;
        if(player.hasJudge('lebu')) return true;
        var ng=[];
        var players=game.filterPlayer();
        for(var i=0;i<players.length;i++){
            if(players[i].group!='unknown'){
                ng.add(players[i].group);
            }
        }
        ng=ng.length;
        if(ng<2) return false;
        var nai=0;
        for(var i=0;i<players.length;i++){
            if(players[i]!=player){
                var dist=get.distance(players[i],player,'attack');
                if(dist<=1&&dist+ng>1){
                    nai++;
                }
            }
        }
        return nai>=2;
    },
                filter:function(event,player){
        return game.hasPlayer(function(current){
            return current!=player&&get.distance(current,player)<=1;
        });
    },
                content:function(){
        var ng=[];
        var players=game.filterPlayer();
        for(var i=0;i<players.length;i++){
            if(players[i].group!='unknown'){
                ng.add(players[i].group);
            }
        }
        player.$damagepop(ng.length,'unknownx');
        player.storage.sltz+=ng.length;
        player.markSkill('sltz');
        game.addVideo('storage',player,['sltz',player.storage.sltz]);
        trigger.cancel();
    },
                mod:{
                    globalTo:function(from,to,distance){
            if(typeof to.storage.sltz=='number'){
                return distance+to.storage.sltz;
            }
        },
                },
            },
            rzyq:{
                audio:"ext:动漫:1",
                trigger:{
                    source:"damageBegin2",
                },
                forced:true,
                check:function(event,player){
        var att=get.attitude(player,event.player);
        if(event.player.hp==event.player.maxHp) return att<0;
        if(event.player.hp==event.player.maxHp-1&&
            (event.player.maxHp<=3||event.player.hasSkillTag('maixie'))) return att<0;
        return att>0;
    },
                filter:function(event,player){
        return event.card&&event.card.name=='sha';
    },
                logTarget:"player",
                content:function(){
            trigger.player.die(true);
      
    },
                ai:{
                    order:2,
                    result:{
                        target:-10,
                    },
                },
            },
            rdl:{
                nobracket:true,
                audio:"ext:动漫:2",
                mod:{
                    targetInRange:function(card,player){
            if(card.name=='sha'&&get.suit(card)=='club') return true;
        },
                    cardUsable:function(card){
            if(card.name=='sha'&&get.suit(card)=='diamond') return Infinity;
        },
                },
                trigger:{
                    player:"useCard",
                },
                filter:function(event,player){
        return event.card.name=='sha'&&get.suit(event.card)=='diamond';
    },
                forced:true,
                content:function(){
        if(player.stat[player.stat.length-1].card.sha>0){
            player.stat[player.stat.length-1].card.sha--;
        }
    },
            },
            fenshen:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                content:function(){
        player.insertPhase();
        player.addSkill('mingrentishen');
        player.removeSkill('fenshen'); 
    },
                ai:{
                    target:1,
                },
            },
            mingrentishen:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"damageEnd",
                },
                forced:true,
                check:function(card){return 4-get.useful(card),player.countCards('h')<=1;
},
                content:function(){
        player.chooseToDiscard(1,true);
        player.logSkill('mingrentishen');
        player.addSkill('fenshen'); 
        player.removeSkill('mingrentishen');
    },
                ai:{
                    order:1,
                    result:{
                        player:1,
                    },
                },
            },
            luoxuan:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"useCardToPlayered",
                },
                check:function(event,player){
        return get.attitude(player,event.target)<=0;
    },
                filter:function(event,player){
        return event.card.name=='sha';
    },
                logTarget:"target",
                content:function(){
            trigger.target.chooseToDiscard(1,true);
    },
            },
            wdzs:{
                trigger:{
                    player:"damageBefore",
                },
                group:"wdzs_ss",
                forced:true,
                nobracket:true,
                audio:"ext:动漫:1",
                filter:function(event,player){
        return player.getEquip(2);
    },
                content:function(){
        trigger.cancel();
},
                subSkill:{
                    ss:{
                        audio:"ext:动漫:1",
                        trigger:{
                            source:"damageBegin",
                        },
                        filter:function(event,player){
        return player.getEquip(1);
    },
                        forced:true,
                        content:function(){
        trigger.num++;
    },
                        sub:true,
                    },
                },
            },
            gthl:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"damageEnd",
                },
                frequent:true,
                nobracket:true,
                filter:function (event){
        return (event.num>0)
    },
                content:function(){
                player.gain(get.cardPile(function(card){
            return get.type(card,'equip')=='equip';
        }),'gain2');
    },
            },
            hkj:{
                group:["hkj2"],
                position:"he",
                enable:"phaseUse",
                nobracket:true,
                filter:function(event,player){
        var he=player.getCards('he');
        for(var i=0;i<he.length;i++){
            if(["bagua","baiyin","lanyinjia","renwang","tengjia","zhuge"].contains(he[i].name)) return true;
        }
        return false;
    },
                filterCard:function (card){
        return ["bagua","baiyin","lanyinjia","renwang","tengjia","zhuge"].contains(card.name);
    },
                discard:false,
                check:function(){
        return 1;
    },
                content:function (){
        "step 0"
        player.showCards(cards);
        "step 1"
        var card=cards[0];
        player.gain(game.createCard('rewrite_'+card.name,get.suit(card),card.number),'gain2');
    },
                ai:{
                    basic:{
                        order:10,
                    },
                    result:{
                        player:1,
                    },
                },
            },
            sdz:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseBegin",
                },
                direct:true,
                nobracket:true,
                content:function(){
        "step 0"
        player.chooseControl('视为使用【杀】','视为使用【过河拆桥】',function(){
if(game.hasPlayer(function(current){
 return get.attitude(player,current)<0&&current.getEquip(2);
})){
return '视为使用【过河拆桥】';
}else{
   return'视为使用【杀】';
}
});
        "step 1"
        if(result.control=='视为使用【杀】'){
                player.chooseUseTarget('###视为使用一张无距离限制的【杀】',{name:'sha'},false,'nodistance').logSkill='sdz';
    
        }
        else{
                    player.chooseUseTarget('###视为使用一张【过河拆桥】',{name:'guohe'},false,'nodistance').logSkill='sdz';
           
        }
    },
                ai:{
                    order:9,
                    result:{
                        player:function(player,target){
                return 1;
            },
                    },
                    threaten:2,
                },
            },
            hdz:{
                audio:"ext:动漫:5",
                trigger:{
                    player:"shaBegin",
                },
                forced:true,
                nobracket:true,
                filter:function(event){
        return event.target.sex=='male';
    },
                priority:-1,
                content:function(){
        trigger.directHit=true;
},
            },
            wangxiang:{
                usable:1,
                forced:true,
                nobracket:true,
                audio:"ext:动漫:5",
                trigger:{
                    player:"useCardAfter",
                },
                filter:function (event,player){
        if(!player.isPhaseUsing()) return false;
        if(get.type(event.card)==undefined) return false;
        return (event.targets&&event.targets.length==1);
    },
                content:function (){
        "step 0"
        var card=get.cardPile2(function(card){
            return card.number==11;
        });
        if(!card){
            player.chat('无牌可得了吗');
            game.log('但是牌堆里面已经没有点数为J的牌了！');
            event.finish();
            return;
        }
        player.gain(card,'gain2');
    "step 0"
            var card=get.cardPile2(function(card){
            return card.number==8;
        });
        if(!card){
            player.chat('无牌可得了吗');
            game.log('但是牌堆里面已经没有点数为8的牌了！');
            event.finish();
            return;
        }
        player.gain(card,'gain2');
    },
            },
            fjzh:{
                audio:"ext:动漫:1",
                usable:1,
                enable:"phaseUse",
                content:function (){
        player.draw(3);

         player.init('dijia');

    
 },
                ai:{
                    order:9,
                    result:{
                        player:function(player){
                if(player.hp==1) return 2;
                if(player.hp==2) return 1;
                return -1;
            },
                    },
                    threaten:2,
                },
            },
            jsq:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseAfter",
                },
                forced:true,
                nobracket:true,
                content:function(){
        player.loseHp(15);
    },
            },
            atgx:{
                audio:"ext:动漫:1",
                usable:1,
                nobracket:true,
                enable:"phaseUse",
                filterTarget:function (card,player,target){
 return player!=target&&target.hp==1;
 },
                content:function (){
        'step 0'
 target.damage(2);
        'step 1'
        player.removeSkill("atgx");

    
 },
                ai:{
                    order:10,
                    result:{
                        target:-10,
                    },
                },
            },
            ltpd:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseAfter",
                },
                group:"ltpd1",
                direct:true,
                nobracket:true,
                content:function(){
        'step 0'
        player.chooseTarget(get.prompt('裸体派对'),'令任意名装备区没牌的角色各摸一张牌',[1,Infinity],function(card,player,target){
            return !target.getEquip(1)&&!target.getEquip(2)&&!target.getEquip(3)&&!target.getEquip(4);
        }).set('ai',function(target){
            return get.attitude(player,target);
        });
        'step 1'
        if(result.bool){
            player.logSkill('ltpd',result.targets);
            game.asyncDraw(result.targets);
        }
    },
                ai:{
                    expose:0.3,
                    threaten:1.3,
                },
            },
            "ltpd1":{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseBegin",
                },
                direct:true,
                nobracket:true,
                content:function(){
        'step 0'
        player.chooseTarget(get.prompt('裸体派对'),'令任意名装备区没牌的角色各摸一张牌',[1,Infinity],function(card,player,target){
            return !target.getEquip(1)&&!target.getEquip(2)&&!target.getEquip(3)&&!target.getEquip(4);
        }).set('ai',function(target){
            return get.attitude(player,target);
        });
        'step 1'
        if(result.bool){
            player.logSkill('ltpd',result.targets);
            game.asyncDraw(result.targets);
        }
    },
                ai:{
                    expose:0.3,
                    threaten:1.3,
                },
            },
            chuanjiao:{
                audio:"ext:动漫:2",
                limited:true,
                unique:true,
                enable:"phaseUse",
                usable:1,
                filterTarget:function (card,player,target){
        return player!=target;
    },
                filter:function (event,player){
      
        return player.countCards('e')>0;
    },
                skillAnimation:true,
                animationColor:"thunder",
                position:"e",
                filterCard:true,
                selectCard:[1,Infinity],
                discard:false,
                lose:true,
                content:function (){
 
        player.$give(cards,target,false);
        target.storage.yinluan=cards.slice(0);
        target.addSkill('yinluan');
    },
                ai:{
                    order:10,
                    result:{
                        target:4,
                    },
                },
                mark:true,
                intro:{
                    content:"limited",
                },
                init:function(player,skill){
        player.storage[skill]=false;
    },
            },
            baozou:{
                enable:"phaseUse",
                usable:1,
                audio:"ext:动漫:2",
                position:"he",
                filterCard:true,
                check:function(card){
        if(get.type(card)!='equip') return 0;
        var player=_status.currentPhase;
        if(player.countCards('he',{subtype:get.subtype(card)})>1){
            return 11-get.equipValue(card);
        }
        return 6-get.equipValue(card);
    },
                content:function(){
        "step 0"
        player.addTempSkill('gongji2');
        "step 1"
        if(get.type(cards[0])=='equip'){
            player.chooseTarget('是否弃置一名角色的一张牌？',function(card,player,target){
                return player!=target&&target.countCards('he')>0;
            }).set('ai',function(target){
                var player=_status.event.player;
                if(get.attitude(player,target)<0){
                    return Math.max(0.5,get.effect(target,{name:'sha'},player,player));
                }
                return 0;
            });
        }
        else{
            event.finish();
        }
        "step 2"
        if(result.bool){
            player.line(result.targets,'green');
            event.target=result.targets[0];
            player.discardPlayerCard(event.target,'he',true).ai=get.buttonValue;
        }
    },
                ai:{
                    order:9,
                    result:{
                        player:1,
                    },
                },
            },
            dmxisheng:{
                audio:"ext:动漫:2",
                trigger:{
                    global:"useCard",
                },
                filter:function(event,player){        
        return event.card&&event.card.name=='sha'&&event.player!=player&&
        event.targets.length==1&&event.targets[0]!=player&&get.distance(event.player,player,'attack')<=1;
    },
                logTarget:"player",
                check:function(event,player){
        return get.effect(event.targets[0],{name:'sha'},event.player,player)<=get.effect(player,{name:'sha'},event.player,player);
    },
                content:function(){
        'step 0'
        player.draw();
        trigger.targets=[player];
        var next=game.createEvent('twtijin_discard',null,trigger.getParent());
        next.player=player;
        next.target=trigger.player;
        next.setContent(function(){
        });
    },
            },
            yinluan:{
                trigger:{
                    source:"damageBegin1",
                },
                forced:true,
                content:function (){
        'step 0'
        player.chooseCardButton('将一张“淫”置入弃牌堆',player.storage.yinluan,true);
        'step 1'
        if(result.bool){
            player.$throw(result.links);
            var card=result.links[0];
            game.cardsDiscard(card);
            player.storage.yinluan.remove(card);
            player.syncStorage('yinluan');
            player.updateMarks('yinluan');
        }
        if(player.storage.yinluan.length==0){
            player.removeSkill('yinluan');
        }
        trigger.num++;
    },
                mark:true,
                marktext:"淫",
                intro:{
                    content:"cards",
                },
            },
            jvren:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                nobracket:true,
                forced:true,
                content:function(){
        player.draw();
    },
                mod:{
                    globalFrom:function(from,to){
            if(from.hp>=to.hp) return -Infinity;
        },
                },
            },
            "jvren2":{
                trigger:{
                    source:"damageBegin1",
                },
                filter:function(event){
        return event.card&&(event.card.name=='sha'||event.card.name=='juedou')&&event.notLink();
    },
                nobracket:true,
                forced:true,
                content:function(){
        trigger.num++;
    },
                ai:{
                    damageBonus:true,
                },
            },
            ningshi:{
                audio:"ext:动漫:2",
                enable:"phaseUse",
                usable:1,
                nobracket:true,
                filterTarget:function (card,player,target){
    return player!=target },
                content:function (){
                     var card=get.cardPile('shan','field');
        if(card){
            target.gain(card,'gain2','log');
        }
        target.chooseToDiscard(2,true);

    },
                ai:{
                    order:10,
                    result:{
                        target:function(player,target){
                if(target.countCards('h')>=1) ;
                return -1;
         if(target.countCards('h')=0) ;
                return 0;   },
                    },
                    threaten:1.1,
                },
            },
            fengkuang:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                direct:true,
                nobracket:true,
                filter:function(event,player){
        return game.hasPlayer(function(player,target){
            return player.countCards('h')==0&&player!=target;
        });
    },
                content:function(){
        'step 0'
        player.chooseTarget(get.prompt('san值狂掉'),'令一名没有手牌的其他角色摸一张牌并进入混乱状态，直到其回合结束',function(card,player,target){
            return target.countCards('h')==0;
            
            
        }
                            
                           ).
      
        set('ai',function(target){
            var player=_status.event.player;
            return get.damageEffect(target,player,player);
        });
        
        
        'step 1'
        if(result.bool){
            player.logSkill('fengkuang',result.targets);
            result.targets[0].goMad({player:"phaseAfter"});result.targets[0].draw();
            
            
        }
    },
            },
            hhq:{
                audio:"ext:动漫:1",
                enable:"phaseUse",
                usable:1,
                nobracket:true,
                selectTarget:[1,8],
                filterTarget:function(card,player,target){
        return target!=player;
    },
                content:function(){
        "step 0"
        if(typeof event.baseDamage!='number') event.baseDamage=1;
        if(event.directHit) event._result={bool:false};
        else{
            var next=target.chooseToRespond({name:'shan'});
            next.set('ai',function(card){
                var evt=_status.event.getParent();
                if(get.damageEffect(evt.target,evt.player,evt.target)>=0) return 0;
                if(evt.player.hasSkillTag('notricksource')) return 0;
                if(evt.target.hasSkillTag('notrick')) return 0;
                if(evt.target.hasSkillTag('noShan')){
                    return -1;
                }
            return 11-get.value(card);
            });
            next.autochoose=lib.filter.autoRespondShan;
        }
        "step 1"
        if(result.bool==false){
            target.damage(event.baseDamage,'fire');
        }
        "step 2"
        player.removeSkill("hhq");
    },
                ai:{
                    order:10,
                    result:{
                        target:-1,
                    },
                },
            },
            xznh:{
                forced:true,
                unique:true,
                mark:true,
                skillAnimation:true,
                animationStr:"须佐能乎",
                limited:true,
                animationColor:"orange",
                audio:"ext:动漫:1",
                nobracket:true,
                trigger:{
                    player:"dyingAfter",
                },
                content:function(){
        player.changeHujia(3);
        player.removeSkill("xznh");
        player.addSkill("xznh2");
    },
                intro:{
                    content:"limited",
                },
                init:function(player,skill){
        player.storage[skill]=false;
    },
            },
            xiwang:{
                audio:"ext:动漫:2",
                enable:"chooseToUse",
                filter:function(event,player){
        return _status.currentPhase!=player;
    },
                filterCard:function(card){
        return get.color(card)=='red';
    },
                position:"he",
                viewAs:{
                    name:"tao",
                },
                prompt:"将一张红色牌当桃使用",
                check:function(card){return 15-get.value(card)},
                ai:{
                    skillTagFilter:function(player){
            return player.countCards('he',{color:'red'})>0&&_status.currentPhase!=player;
        },
                    threaten:1.5,
                    save:true,
                    respondTao:true,
                    basic:{
                        order:function(card,player){
                if(player.hasSkillTag('pretao')) return 5;
                return 2;
            },
                        useful:[8,6.5,5,4],
                        value:[8,6.5,5,4],
                    },
                    result:{
                        target:function(player,target){
                // if(player==target&&player.hp<=0) return 2;
                if(player.hasSkillTag('nokeep')) return 2;
                var nd=player.needsToDiscard();
                var keep=false;
                if(nd<=0){
                    keep=true;
                }
                else if(nd==1&&target.hp>=2&&target.countCards('h','tao')<=1){
                    keep=true;
                }
                var mode=get.mode();
                if(target.hp>=2&&keep&&target.hasFriend()){
                    if(target.hp>2||nd==0) return 0;
                    if(target.hp==2){
                        if(game.hasPlayer(function(current){
                            if(target!=current&&get.attitude(target,current)>=3){
                                if(current.hp<=1) return true;
                                if((mode=='identity'||mode=='versus'||mode=='chess')&&current.identity=='zhu'&&current.hp<=2) return true;
                            }
                        })){
                            return 0;
                        }
                    }
                }
                if(target.hp<0&&target!=player&&target.identity!='zhu') return 0;
                var att=get.attitude(player,target);
                if(att<3&&att>=0&&player!=target) return 0;
                var tri=_status.event.getTrigger();
                if(mode=='identity'&&player.identity=='fan'&&target.identity=='fan'){
                    if(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='fan'&&tri.source!=target){
                        var num=game.countPlayer(function(current){
                            if(current.identity=='fan'){
                                return current.countCards('h','tao');
                            }
                        });
                        if(num>1&&player==target) return 2;
                        return 0;
                    }
                }
                if(mode=='identity'&&player.identity=='zhu'&&target.identity=='nei'){
                    if(tri&&tri.name=='dying'&&tri.source&&tri.source.identity=='zhong'){
                        return 0;
                    }
                }
                if(mode=='stone'&&target.isMin()&&
                player!=target&&tri&&tri.name=='dying'&&player.side==target.side&&
                tri.source!=target.getEnemy()){
                    return 0;
                }
                return 2;
            },
                    },
                    tag:{
                        recover:1,
                        save:1,
                    },
                },
            },
            lyfg:{
                audio:"ext:动漫:1",
                usable:1,
                nobracket:true,
                enable:"phaseUse",
                filterTarget:function (card,player,target){
 return player!=target;
 },
                content:function (){
 target.damage(1,'fire');
     player.removeSkill("lyfg");
 },
                ai:{
                    order:2,
                    result:{
                        target:-1,
                    },
                },
            },
            sszs:{
                nobracket:true,
                audio:"ext:动漫:1",
                trigger:{
                    player:"damageEnd",
                },
                filter:function(event,player){
        return (event.source!=undefined);
    },
                viewAsFilter:function(player){
        return player.countCards('h')>0;
    },
                check:function(event,player){
        return (get.attitude(player,event.source)<=0);
    },
                logTarget:"source",
                content:function(){ 
        player.chooseToDiscard(1,true);
            trigger.source.damage();
    },
                ai:{
                    order:10,
                    result:{
                        target:-1,
                    },
                },
            },
            ltjd:{
                nobracket:true,
                mod:{
                    globalFrom:function(from,to,distance){
            return distance-1;
        },
                },
                audio:"ext:动漫:2",
                group:["ltjd_sha","ltjd_shan"],
                subSkill:{
                    sha:{
                        audio:"ext:动漫:1",
                        enable:"chooseToUse",
                        viewAs:{
                            name:"sha",
                        },
                        filterCard:function(){return false},
                        viewAsFilter:function(player){
                if(player.hasSkill('ltjd_disable')) return false;
            },
                        selectCard:-1,
                        mark:false,
                        precontent:function(){
                player.addTempSkill('ltjd_disable','roundStart');
            },
                        prompt:"视为使用一张杀",
                        ai:{
                            order:function(){
                    var player=_status.event.player;
                    if(!player.hasShan()&&!game.hasPlayer(function(current){
                        return player.canUse('sha',current)&&current.hp==1&&get.effect(current,{name:'sha'},player,player)>0;
                    })){
                        return 0;
                    }
                    return 2.95;
                },
                            skillTagFilter:function(player,tag,arg){
                    if(player.hasSkill('ltjd_disable')) return false;
                    if(arg!='use') return false;
                },
                            respondSha:true,
                            basic:{
                                useful:[5,1],
                                value:[5,1],
                            },
                            result:{
                                target:function(player,target){
                        if(player.hasSkill('jiu')&&!target.getEquip('baiyin')){
                            if(get.attitude(player,target)>0){
                                return -6;
                            }
                            else{
                                return -3;
                            }
                        }
                        return -1.5;
                    },
                            },
                            tag:{
                                respond:1,
                                respondShan:1,
                                damage:function(card){
                        if(card.nature=='poison') return;
                        return 1;
                    },
                                natureDamage:function(card){
                        if(card.nature) return 1;
                    },
                                fireDamage:function(card,nature){
                        if(card.nature=='fire') return 1;
                    },
                                thunderDamage:function(card,nature){
                        if(card.nature=='thunder') return 1;
                    },
                                poisonDamage:function(card,nature){
                        if(card.nature=='poison') return 1;
                    },
                            },
                        },
                        sub:true,
                    },
                    shan:{
                        audio:"ext:动漫:1",
                        enable:"chooseToUse",
                        viewAs:{
                            name:"shan",
                        },
                        mark:false,
                        filterCard:function(){return false},
                        viewAsFilter:function(player){
                if(player.hasSkill('ltjd_disable')) return false;
                return true;
            },
                        onuse:function(event,player){
                player.addTempSkill('ltjd_disable','roundStart');
            },
                        selectCard:-1,
                        prompt:"视为使用一张闪",
                        ai:{
                            order:function(){
                    var player=_status.event.player;
        
                    return 3.15;
                },
                            skillTagFilter:function(player){
                    if(player.hasSkill('ltjd_disable')) return false;
                },
                            respondShan:true,
                            basic:{
                                useful:[7,2],
                                value:[7,2],
                            },
                            result:{
                                player:1,
                            },
                        },
                        sub:true,
                    },
                    disable:{
                        mark:true,
                        intro:{
                            content:"本轮已发动",
                        },
                        sub:true,
                    },
                },
            },
            qiege:{
                audio:"ext:动漫:2",
                nobracket:true,
                trigger:{
                    player:"shaBegin",
                },
                filter:function(event,player){
        return event.target.hp>player.hp;
    },
                content:function(){
       trigger.target.loseHp();
},
                ai:{
                    order:2,
                    result:{
                        target:-1,
                    },
                },
            },
            ixa:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"shaMiss",
                },
                nobracket:true,
                content:function (){
       player.draw();
         player.logSkill("ixa");
        player.discardPlayerCard('he',trigger.target,true);

    },
            },
            mingshen:{
                audio:"ext:动漫:1",
                nobracket:true,
                trigger:{
                    player:["useCard","respond"],
                },
                filter:function(event,player){
        return event.card.name=='shan';
    },
                direct:true,
                content:function (){
         "step 0"
        player.draw();
        "step 1"
        player.chooseTarget("是否发动【IXA】对一名其他角色造成1点伤害？",function(card,player,target){
            return target!=player;
        }).set('ai',function(target){
            return -get.attitude(_status.event.player,target);
        }).set('target',trigger.target);
        "step 2"
        player.logSkill("mingshen");
        if(result.bool&&result.targets&&result.targets.length){
            result.targets[0].damage(1,'thunder');
        }
    },
            },
            "xznh2":{
                nobracket:true,
                trigger:{
                    player:"phaseBegin",
                },
                forced:true,
                content:function(){
        player.draw();
    },
            },
            zhan:{
                mod:{
                    cardEnabled:function (card,player){
            if(_status.event.skill==undefined&&player.storage.badao.contains(card)) return false;
        },
                    cardUsable:function (card,player){
            if(_status.event.skill==undefined&&player.storage.badao.contains(card)) return false;
        },
                    cardRespondable:function (card,player){
            if(_status.event.skill==undefined&&player.storage.badao.contains(card)) return false;
        },
                    cardSavable:function (card,player){
            if(_status.event.skill==undefined&&player.storage.badao.contains(card)) return false;
        },
                },
                enable:["chooseToUse"],
                filter:function(){
        return true;
    },
                onremove:function(player){
        player.storage.badao = [];
    },
                filterCard:function(card){
        var player=_status.event.player;
        return player.storage.badao.contains(card);
    },
                viewAs:{
                    name:"sha",
                },
                prompt:"将【拔刀】牌当【杀】使用",
                audio:"ext:动漫:1",
                sub:true,
                ai:{
                    basic:{
                        useful:[5,1],
                        value:[5,1],
                    },
                    order:function(){
            if(_status.event.player.hasSkillTag('presha',true,null,true)) return 10;
            return 3;
        },
                    result:{
                        target:function(player,target){
                if(player.hasSkill('jiu')&&!target.hasSkillTag('filterDamage',null,{
                    player:player,
                    card:{name:'sha'},
                })){
                    if(get.attitude(player,target)>0){
                        return -7;
                    }
                    else{
                        return -4;
                    }
                }
                return -1.5;
            },
                    },
                    tag:{
                        respond:1,
                        respondShan:1,
                        damage:function(card){
                if(card.nature=='poison') return;
                return 1;
            },
                        natureDamage:function(card){
                if(card.nature) return 1;
            },
                        fireDamage:function(card,nature){
                if(card.nature=='fire') return 1;
            },
                        thunderDamage:function(card,nature){
                if(card.nature=='thunder') return 1;
            },
                        poisonDamage:function(card,nature){
                if(card.nature=='poison') return 1;
            },
                    },
                },
            },
            zengzhi:{
                audio:"ext:动漫:1",
                forced:true,
                trigger:{
                    player:"damageEnd",
                },
                content:function (){
      
        player.gainMaxHp();
    },
                ai:{
                    maixie:true,
                    threaten:4,
                },
            },
            shishi:{
                audio:"ext:动漫:2",
                forced:true,
                trigger:{
                    global:"die",
                },
                content:function (){
        player.recover(999);
        
    },
            },
            "hkj2":{
                prompt:"出牌阶段，你可以展示一张未强化过的【诸葛连弩】或标准包/军争包/SP包中的防具牌，然后对其进行强化。当你处于濒死状态时，你可以重铸一张防具牌，将体力回复至1点。",
                enable:"chooseToUse",
                filterCard:function (card){
        return get.subtype(card)=='equip2';
    },
                filter:function (event,player){
        if(event.type=='dying'){
            if(player!=event.dying) return false;
            return true;
        }
        return false;
    },
                check:function(){
        return 1;
    },
                position:"he",
                content:function (){
        'step 0'
        player.draw();
        player.recover(1-player.hp);
    },
                ai:{
                    order:0.5,
                    skillTagFilter:function (player){
            if(player.hp>0) return false;
        },
                    save:true,
                    result:{
                        player:function (player){
                return 10;
            },
                    },
                },
            },
            dmbenghuai:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                direct:true,
                content:function(){
        "step 0"
        if(player.storage.kunfen||
        (get.mode()=='guozhan'&&player.hiddenSkills.contains('dmbenghuai'))){
            if(!player.storage.kunfen){
                event.skillHidden=true;
            }
            player.chooseBool(get.prompt2('dmbenghuai')).set('ai',function(){
                var player=_status.event.player;
                if(player.hp>3) return true;
                if(player.hp==3&&player.countCards('h')<3) return true;
                if(player.hp==2&&player.countCards('h')==0) return true;
                return false;
            });
        }
        else{
            event.forced=true;
        }
        "step 1"
        if(event.forced||result.bool){
            player.logSkill('dmbenghuai');
            player.loseHp();
        }
        else{
            event.finish();
        }
        "step 2"
        player.draw(2);
    },
                ai:{
                    threaten:1.5,
                },
            },
            dmjinhua:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"damageEnd",
                },
                nobracket:true,
                forced:true,
                content:function(){
        var list=[];
        if(!player.hasSkill('jhyingzi')){
            list.push('jhyingzi');
        }
        if(!player.hasSkill('jhjizhi')){
            list.push('jhjizhi');
        }
        if(!player.hasSkill('jhbiyue')){
            list.push('jhbiyue');
        }
               if(!player.hasSkill('jhyizhong')){
            list.push('jhyizhong');
        }
               if(!player.hasSkill('jhpaoxiao')){
            list.push('jhpaoxiao');
        }
                    if(!player.hasSkill('jhyicong')){
            list.push('jhyicong');
        }
        if(list.length){
      var num=list.randomGet();
player.addSkill(num)&&player.logSkill(num);
                    }
else player.removeSkill('dmjinhua')
    },
                ai:{
                    maixie:true,
                    "maixie_hp":true,
                    order:10,
                    result:{
                        player:3,
                    },
                    threaten:4,
                },
            },
            jhyingzi:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseDrawBegin2",
                },
                frequent:true,
                content:function(){
        trigger.num++;
        
    
    },
                ai:{
                    threaten:1.3,
                },
            },
            jhbiyue:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                frequent:true,
                content:function(){
        player.draw();
    },
            },
            jhjizhi:{
                audio:"ext:动漫:1",
                audioname:["jianyong"],
                trigger:{
                    player:"useCard",
                },
                frequent:true,
                filter:function(event){
        return (get.type(event.card)=='trick'&&(!event.cards.length||event.cards[0]&&event.cards[0]==event.card));
    },
                content:function(){
        player.draw();
    },
                ai:{
                    threaten:1.4,
                    noautowuxie:true,
                },
            },
            jhpaoxiao:{
                audio:"ext:动漫:1",
                firstDo:true,
                audioname:["re_zhangfei","guanzhang","xiahouba"],
                trigger:{
                    player:"useCard1",
                },
                forced:true,
                filter:function(event,player){
        return !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';
    },
                content:function(){
        trigger.audioed=true;
    },
                mod:{
                    cardUsable:function(card,player,num){
            if(card.name=='sha') return Infinity;
        },
                },
                ai:{
                    unequip:true,
                    skillTagFilter:function(player,tag,arg){
            if(!get.zhu(player,'shouyue')) return false;
            if(arg&&arg.name=='sha') return true;
            return false;
        },
                },
            },
            jhyicong:{
                trigger:{
                    player:["changeHp"],
                },
                audio:"ext:动漫:1",
                audioname:["re_gongsunzan"],
                forced:true,
                filter:function(event,player){
        return get.sgn(player.hp-2.5)!=get.sgn(player.hp-2.5-event.num);
    },
                content:function (){},
                mod:{
                    globalFrom:function(from,to,current){
            if(from.hp>2) return current-1;
        },
                    globalTo:function(from,to,current){
            if(to.hp<=2) return current+1;
        },
                },
                ai:{
                    threaten:0.8,
                },
            },
            jhyizhong:{
                audio:"ext:动漫:1",
                trigger:{
                    target:"shaBefore",
                },
                forced:true,
                filter:function(event,player){
        if(player.getEquip(2)) return false;
        return (event.card.name=='sha'&&get.color(event.card)=='black')
    },
                content:function(){
        trigger.cancel();
    },
                ai:{
                    effect:{
                        target:function(card,player,target){
                if(player==target&&get.subtype(card)=='equip2'){
                    if(get.equipValue(card)<=8) return 0;
                }
                if(target.getEquip(2)) return;
                if(card.name=='sha'&&get.color(card)=='black') return 'zerotarget';
            },
                    },
                },
            },
            baibaodai:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"equipEnd",
                },
                frequent:true,
                content:function(){
        player.gain(get.cardPile(function(card){
            return get.type(card,'trick')=='trick';
        }),'gain2');
    },
                ai:{
                    effect:{
                        target:function(card,player,target,current){
                if(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];
            },
                    },
                    threaten:1.3,
                },
            },
            bangmang:{
                audio:"ext:动漫:2",
                enable:"phaseUse",
                filterCard:true,
                selectCard:[1,Infinity],
                discard:false,
                lose:false,
                delay:0,
                filterTarget:function(card,player,target){
        return player!=target;
    },
                check:function(card){
        if(ui.selected.cards.length>1) return 0;
        if(ui.selected.cards.length&&ui.selected.cards[0].name=='du') return 0;
        if(!ui.selected.cards.length&&card.name=='du') return 20;
        var player=get.owner(card);
        var num=0;
        var evt2=_status.event.getParent();
        var num=0;
        player.getHistory('lose',function(evt){
            if(evt.getParent().skill=='rende'&&evt.getParent(3)==evt2) num+=evt.cards.length;
        });
        if(player.hp==player.maxHp||num>1||player.countCards('h')<=1){
            if(ui.selected.cards.length){
                return -1;
            }
            var players=game.filterPlayer();
            for(var i=0;i<players.length;i++){
                if(players[i].hasSkill('haoshi')&&
                    !players[i].isTurnedOver()&&
                    !players[i].hasJudge('lebu')&&
                    get.attitude(player,players[i])>=3&&
                    get.attitude(players[i],player)>=3){
                    return 11-get.value(card);
                }
            }
            if(player.countCards('h')>player.hp) return 10-get.value(card);
            if(player.countCards('h')>2) return 6-get.value(card);
            return -1;
        }
        return 10-get.value(card);
    },
                content:function(){
        target.gain(cards,player,'giveAuto');
        var evt2=event.getParent(3);
        var num=0;
        player.getHistory('lose',function(evt){
            if(evt.getParent(2).name=='rende'&&evt.getParent(5)==evt2) num+=evt.cards.length;
        });
        if(num<2&&num+cards.length>1) player.recover();
    },
                ai:{
                    order:function(skill,player){
            if(player.hp<player.maxHp&&player.storage.rende<2&&player.countCards('h')>1){
                return 10;
            }
            return 1;
        },
                    result:{
                        target:function(player,target){
                if(target.hasSkillTag('nogain')) return 0;
                if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
                    if(target.hasSkillTag('nodu')) return 0;
                    return -10;
                }
                if(target.hasJudge('lebu')) return 0;
                var nh=target.countCards('h');
                var np=player.countCards('h');
                if(player.hp==player.maxHp||player.storage.rende<0||player.countCards('h')<=1){
                    if(nh>=np-1&&np<=player.hp&&!target.hasSkill('haoshi')) return 0;
                }
                return Math.max(1,5-nh);
            },
                    },
                    effect:{
                        target:function(card,player,target){
                if(player==target&&get.type(card)=='equip'){
                    if(player.countCards('e',{subtype:get.subtype(card)})){
                        var players=game.filterPlayer();
                        for(var i=0;i<players.length;i++){
                            if(players[i]!=player&&get.attitude(player,players[i])>0){
                                return 0;
                            }
                        }
                    }
                }
            },
                    },
                    threaten:0.8,
                },
            },
            bhxt:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseBegin",
                },
                forced:true,
                nobracket:true,
                content:function(){
        "step 0"
        player.chooseControl('空中型','强力型');
        "step 1"
        if(result.control=='空中型'){
     
                                           player.addSkill("jvren")&&player.removeSkill("jvren2");
        }
        else{
                                 player.addSkill("jvren2")&&player.removeSkill("jvren");
        }
    },
                ai:{
                    order:9,
                    result:{
                        target:function(player,target){
                return -target.countCards('he')-(player.countCards('h','du')?1:0);
            },
                    },
                    threaten:2,
                },
            },
            "躁动":{
                mark:true,
                locked:false,
                zhuanhuanji:true,
                marktext:"躁动",
                intro:{
                    content:function(storage,player,skill){
            if(player.storage.nzry_chenglve==true) return '出牌阶段限一次，你可以摸两张牌，然后弃置一张手牌。若如此做，直到本回合结束，你使用与弃置牌花色相同的牌无距离和次数限制';
            return '出牌阶段限一次，你可以摸一张牌，然后弃置两张手牌。若如此做，直到本回合结束，你使用与弃置牌花色相同的牌无距离和次数限制';
        },
                },
                enable:"phaseUse",
                usable:1,
                audio:"ext:动漫:2",
                content:function(){
        'step 0'
        if(player.storage.nzry_chenglve==true){
            player.storage.nzry_chenglve=false;
            player.draw(2);
            player.chooseToDiscard('h',true);
        }else{
            player.storage.nzry_chenglve=true;
            player.draw();
            player.chooseToDiscard('h',2,true);
        };
        'step 1'
        if(result.bool){
            player.storage.nzry_chenglve1=result.cards;
            player.syncStorage('nzry_chenglve1');
            player.addTempSkill('nzry_chenglve1',{player:'phaseAfter'});
        };
    },
                ai:{
                    order:2.7,
                    result:{
                        player:function(player){
                if((player.storage.nzry_chenglve==undefined||player.storage.nzry_chenglve==false)&&player.countCards('h')<3) return 0;
                return 1;
            },
                    },
                },
            },
            olol:{
                audio:"ext:动漫:2",
                firstDo:true,
                nobracket:true,
                audioname:["re_zhangfei","guanzhang","xiahouba"],
                trigger:{
                    player:"useCard1",
                },
                forced:true,
                filter:function(event,player){
        return !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';
    },
                content:function(){
        player.say("欧拉欧拉欧拉欧拉!");
        trigger.audioed=true;
    },
                mod:{
                    cardUsable:function(card,player,num){
            if(card.name=='sha') return Infinity;
        },
                },
                ai:{
                    unequip:true,
                    skillTagFilter:function(player,tag,arg){
            if(!get.zhu(player,'shouyue')) return false;
            if(arg&&arg.name=='sha') return true;
            return false;
        },
                },
            },
            thewhord:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"loseAfter",
                },
                frequent:true,
                filter:function(event,player){
        if(player.countCards('h')) return false;
        return event.hs&&event.hs.length>0;
    },
                content:function(){
        
        player.draw();
    },
                ai:{
                    threaten:0.8,
                    effect:{
                        target:function(card){
                if(card.name=='guohe'||card.name=='liuxinghuoyu') return 0.5;
            },
                    },
                    noh:true,
                    skillTagFilter:function(player,tag){
            if(tag=='noh'){
                if(player.countCards('h')!=1) return false;
            }
        },
                },
            },
            jiedan:{
                mod:{
                    globalFrom:function(from,to){
            if(from.hp>=to.hp) return -Infinity;
        },
                },
            },
            wjtl:{
                audio:"ext:动漫:2",
                usable:1,
                enable:"phaseUse",
                nobracket:true,
                filterTarget:function (card,player,target){
return player!=target;
        
},
                content:function (){
        player.say("死！");
target.damage();
 target.addTempSkill('chuanxi','targets.phaseEnd');
},
                ai:{
                    order:2,
                    result:{
                        target:-1,
                    },
                },
            },
            chuanxi:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                forced:true,
                content:function(){
        player.recover();
         player.removeSkill("chuanxi");
    },
            },
            sy:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseEnd",
                },
                frequent:true,
                content:function(){
        
               var card=get.cardPile('sha','field');
        if(card){
            player.gain(card,'gain2','log');
        }
        
    },
            },
            jh:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"damageEnd",
                },
                direct:true,
                content:function(){
        "step 0"
        
        player.chooseTarget(get.prompt('jh'),'令一名其他角色将武将牌翻面并摸'+get.cnNumber(player.getDamagedHp())+'张牌',function(card,player,target){player.say( ["急着求死吗？","趁我还没发火——"].randomGet() );
            return player!=target
        }).ai=function(target){
            if(target.hasSkillTag('noturn')) return 0;
            var player=_status.event.player;
            if(get.attitude(_status.event.player,target)==0) return 0;
            if(get.attitude(_status.event.player,target)>0){
                if(target.classList.contains('turnedover')) return 1000-target.countCards('h');
                if(player.getDamagedHp()<3) return -1;
                return 100-target.countCards('h');
            }
            else{
                if(target.classList.contains('turnedover')) return -1;
                if(player.getDamagedHp()>=3) return -1;
                return 1+target.countCards('h');
            }
        }
        "step 1"
        if(result.bool){
         
            result.targets[0].draw(player.getDamagedHp());
            result.targets[0].turnOver();
        }
    },
                ai:{
                    maixie:true,
                    "maixie_hp":true,
                    effect:{
                        target:function(card,player,target){
                if(get.tag(card,'damage')){
                    if(player.hasSkillTag('jueqing',false,target)) return [1,-2];
                    if(target.hp<=1) return;
                    if(!target.hasFriend()) return;
                    var hastarget=false;
                    var turnfriend=false;
                    var players=game.filterPlayer();
                    for(var i=0;i<players.length;i++){
                        if(get.attitude(target,players[i])<0&&!players[i].isTurnedOver()){
                            hastarget=true;
                        }
                        if(get.attitude(target,players[i])>0&&players[i].isTurnedOver()){
                            hastarget=true;
                            turnfriend=true;
                        }
                    }
                    if(get.attitude(player,target)>0&&!hastarget) return;
                    if(turnfriend||target.hp==target.maxHp) return [0.5,1];
                    if(target.hp>1) return [1,0.5];
                }
            },
                    },
                },
            },
            jjhyingzi:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseDrawBegin2",
                },
                frequent:true,
                content:function(){
        trigger.num++;
    },
                ai:{
                    threaten:1.3,
                },
            },
            szhx:{
                nobracket:true,
                audio:"ext:动漫:2",
                locked:false,
                trigger:{
                    player:"phaseZhunbeiBegin",
                },
                frequent:true,
                content:function(){
        "step 0"
        player.say("呼——");
        if(!player.storage.reluoshen) player.storage.reluoshen=[];
        if(event.cards==undefined) event.cards=[];
        var next=player.judge(function(card){
            if(get.color(card)=='black') return 1.5;
            return -1.5;
        });
        if(get.mode()!='guozhan'&&!player.hasSkillTag('rejudge')) next.set('callback',function(){
            if(event.judgeResult.color=='black'&&get.position(card,true)=='o'){
                player.storage.reluoshen.push(card);
                player.gain(card,'gain2');
            }
        });
        else next.set('callback',function(){
            if(event.judgeResult.color=='black') event.getParent().orderingCards.remove(card);
        });
        "step 1"
        if(result.judge>0){
            event.cards.push(result.card);
            player.chooseBool('是否再次发动【水之呼吸】？').set('frequentSkill','szhx');
        }
        else{
            for(var i=0;i<event.cards.length;i++){
                if(get.position(event.cards[i],true)!='o'){
                    event.cards.splice(i,1);i--;
                }
            }
            if(event.cards.length){
                player.gain(event.cards,'gain2');
                player.storage.reluoshen.addArray(event.cards);
            }
            event.finish();
        }
        "step 2"
        if(result.bool){
            event.goto(0);
        }
        else{
            for(var i=0;i<event.cards.length;i++){
                if(get.position(event.cards[i],true)!='o'){
                    event.cards.splice(i,1);i--;
                }
            }
            if(event.cards.length){
                player.gain(event.cards,'gain2');
                player.storage.reluoshen=event.cards.slice(0);
            }
        }
    },
                mod:{
                    ignoredHandcard:function(card,player){
            if(player.storage.reluoshen&&player.storage.reluoshen.contains(card)){
                return true;
            }
        },
                    cardDiscardable:function(card,player,name){
            if(name=='phaseDiscard'&&player.storage.reluoshen&&player.storage.reluoshen.contains(card)){
                return false;
            }
        },
                },
                group:"reluoshen_clear",
                subSkill:{
                    clear:{
                        trigger:{
                            player:"phaseAfter",
                        },
                        silent:true,
                        content:function(){
                delete player.storage.reluoshen;
            },
                        sub:true,
                        forced:true,
                        popup:false,
                    },
                },
            },
            zg:{
                trigger:{
                    global:"dying",
                },
                priority:9,
                filter:function(event,player){
        return event.player.hp<=0&&(player.countCards('h','jiu')>0||player.countCards('h',{color:'black'})>=2)&&player!=event.player;
    },
                direct:true,
                content:function(){
        'step 0'
        var goon=(get.attitude(player,trigger.player)<0);
        var next=player.chooseToDiscard('斩鬼：是否弃置一张酒或两张黑色手令'+get.translation(trigger.player)+'立即死亡？');
        next.ai=function(card){
            if(ui.selected.cards.length){
                if(ui.selected.cards[0].name=='jiu') return 0;
            }
            if(goon){
                if(card.name=='jiu') return 2;
                return 1;
            }
            return 0;
        };
        next.filterCard=function(card){
            if(ui.selected.cards.length){
                return get.color(card)=='black';
            }
            return get.color(card)=='black'||card.name=='jiu';
        };
        next.complexCard=true,
        next.logSkill=['zhensha',trigger.player];
        next.selectCard=function(){
            if(ui.selected.cards.length){
                if(get.color(ui.selected.cards[0])!='black') return [1,1];
            }
            return [1,2];
        }
        'step 1'
        
        if(result.bool){player.say("你的首级，我收下了！");
            trigger.player.die();
        }
        else{
            event.finish();
        }
        'step 2'
        if(!trigger.player.isAlive()){
            trigger.cancel(true);
        }
    },
                ai:{
                    threaten:1.5,
                },
            },
            ly:{
                audio:"ext:动漫:2",
                audioname:["re_dongzhuo"],
                enable:"chooseToUse",
                filterCard:function(card){
        return get.color(card)=='black';
    },
                viewAs:{
                    name:"jiu",
                },
                viewAsFilter:function(player){
        if(!player.countCards('h',{color:'black'})) return false;
    },
                prompt:"将一张黑色手牌当酒使用",
                check:function(card){
        if(_status.event.type=='dying') return 1;
        return 4-get.value(card);
    },
                ai:{
                    skillTagFilter:function(player){
            return player.countCards('h',{color:'black'})>0&&player.hp<=0;
        },
                    threaten:1.5,
                    save:true,
                    basic:{
                        useful:function(card,i){
                if(_status.event.player.hp>1){
                    if(i==0) return 4;
                    return 1;
                }
                if(i==0) return 7.3;
                return 3;
            },
                        value:function(card,player,i){
                if(player.hp>1){
                    if(i==0) return 5;
                    return 1;
                }
                if(i==0) return 7.3;
                return 3;
            },
                    },
                    order:function(){
            return get.order({name:'sha'})+0.2;
        },
                    result:{
                        target:function(player,target){
                if(target&&target.isDying()) return 2;
                if(target&&!target.isPhaseUsing()) return 0;
                if(lib.config.mode=='stone'&&!player.isMin()){
                    if(player.getActCount()+1>=player.actcount) return 0;
                }
                var shas=player.getCards('h','sha');
                if(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('h','zhuge'))){
                    return 0;
                }
                shas.sort(function(a,b){
                    return get.order(b)-get.order(a);
                })
                var card;
                if(shas.length){
                    for(var i=0;i<shas.length;i++){
                        if(lib.filter.filterCard(shas[i],target)){
                            card=shas[i];break;
                        }
                    }
                }
                else if(player.hasSha()&&player.needsToDiscard()){
                    if(player.countCards('h','hufu')!=1){
                        card={name:'sha'};
                    }
                }
                if(card){
                    if(game.hasPlayer(function(current){
                        return (get.attitude(target,current)<0&&
                            target.canUse(card,current,true,true)&&
                            !current.hasSkillTag('filterDamage',null,{
                                player:player,
                                card:card,
                                jiu:true,
                            })&&
                            get.effect(current,card,target)>0);
                    })){
                        return 1;
                    }
                }
                return 0;
            },
                    },
                    tag:{
                        save:1,
                    },
                },
            },
            sikao:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseUseBegin",
                },
                direct:true,
                content:function (){
        'step 0'
        player.say("别着急，让我想想办法。");
        var list=get.inpile('trick');
        list=list.randomGets(3);
        for(var i=0;i<list.length;i++){
            list[i]=['锦囊','',list[i]];
        }
        var dialog=ui.create.dialog('选择一张锦囊牌加入你的手牌',[list,'vcard'],'hidden');
        player.chooseButton(dialog,true).set('ai',function(button){
            var card={name:button.link[2]};
            var value=get.value(card);
            return value;
        });
        'step 1'
        if(result.bool){
            player.gain(game.createCard(result.buttons[0].link[2]),'draw');
        }
    },
                ai:{
                    order:9,
                    result:{
                        player:1,
                    },
                },
            },
            bengpao:{
                mod:{
                    globalTo:function(from,to,distance){
            return distance+1;
        },
                },
            },
            jskz:{
                audio:"ext:动漫:2",
                nobracket:true,
                audioname:["re_diaochan"],
                enable:"phaseUse",
                usable:1,
                filter:function(event,player){
        return game.countPlayer(function(current){
            return current!=player;
        })>1;
    },
                check:function(card){return 10-get.value(card)},
                filterCard:true,
                position:"he",
                filterTarget:function(card,player,target){
        if(player==target) return false;
       
        if(ui.selected.targets.length==1){
            return target.canUse({name:'juedou'},ui.selected.targets[0]);
        }
        return true;
    },
                targetprompt:["先出杀","后出杀"],
                selectTarget:2,
                multitarget:true,
                content:function(){
        player.say("哦？");
        targets[1].useCard({name:'juedou',isCard:true},'nowuxie',targets[0],'noai').animate=false;
        game.delay(0.5);
       
    },
                group:"jskz2",
                ai:{
                    order:8,
                    result:{
                        target:function(player,target){
                if(ui.selected.targets.length==0){
                    return -3;
                }
                else{
                    return get.effect(target,{name:'juedou'},ui.selected.targets[0],target);
                }
            },
                    },
                    expose:0.4,
                    threaten:3,
                },
            },
            "jskz2":{
                audio:"ext:动漫:2",
                audioname:["re_daqiao","daxiaoqiao"],
                trigger:{
                    target:"useCardToTarget",
                },
                direct:true,
                nobracket:true,
                filter:function(event,player){
        if(event.card.name!='sha') return false;
        if(player.countCards('he')==0) return false;
        return game.hasPlayer(function(current){
            return player.inRange(current)&&current!=event.player&&
                current!=player&&lib.filter.targetEnabled(event.card,event.player,current);
        });
    },
                content:function(){
        "step 0"
        var next=player.chooseCardTarget({
            position:'he',
            filterCard:lib.filter.cardDiscardable,
            filterTarget:function(card,player,target){
                var trigger=_status.event.getTrigger();
                if(trigger.targets.contains(target)) return false;
                if(player.inRange(target)&&
                    target!=trigger.player){
                    if(player.canUse(trigger.card,target)) return true;
                }
                return false;
            },
            ai1:function(card){
                return get.unuseful(card)+9;
            },
            ai2:function(target){
                if(_status.event.player.countCards('h','shan')){
                    return -get.attitude(_status.event.player,target);
                }
                if(get.attitude(_status.event.player,target)<5){
                    return 6-get.attitude(_status.event.player,target);
                }
                if(_status.event.player.hp==1&&player.countCards('h','shan')==0){
                    return 10-get.attitude(_status.event.player,target);
                }
                if(_status.event.player.hp==2&&player.countCards('h','shan')==0){
                    return 8-get.attitude(_status.event.player,target);
                }
                return -1;
            },
            prompt:get.prompt('liuli'),
            prompt2:'弃置一张牌，将此【杀】转移给攻击范围内的一名其他角色',
            
        });
        "step 1"
        if(result.bool){
            var target=result.targets[0];
            player.logSkill(event.name,target);
            player.discard(result.cards);
            player.say("有趣。");
            var evt=trigger.getParent();
            evt.targets.remove(player);
            evt.targets.push(target);
        }
    },
                ai:{
                    effect:{
                        target:function(card,player,target){
                if(target.countCards('he')==0) return;
                if(card.name!='sha') return;
                var min=1;
                var friend=get.attitude(player,target)>0;
                var vcard={name:'shacopy',nature:card.nature,suit:card.suit};
                var players=game.filterPlayer();
                for(var i=0;i<players.length;i++){
                    if(player!=players[i]&&
                        get.attitude(target,players[i])<0&&
                        target.canUse(card,players[i])){
                        if(!friend) return 0;
                        if(get.effect(players[i],vcard,player,player)>0){
                            if(!player.canUse(card,players[0])){
                                return [0,0.1];
                            }
                            min=0;
                        }
                    }
                }
                return min;
            },
                    },
                },
            },
            ffengyin:{
                trigger:{
                    player:"equipBegin",
                },
                forced:true,
                content:function (){
        "step 0"
        player.say( ["给我更多符咒，我会给你金鸡王宝藏！","不够，不够！我还要更多！"].randomGet() );
        player.recover();
        trigger.untrigger();
        trigger.finish();
        player.$equip(trigger.card);
        game.addVideo('equip',player,get.cardInfo(trigger.card));
        game.log(player,'装备了',trigger.card);
        "step 1"
        var info=get.info(trigger.card);
        if(info.onEquip&&(!info.filterEquip||info.filterEquip(trigger.card,player))){
            var next=game.createEvent('equip_'+trigger.card.name);
            next.setContent(info.onEquip);
            next.player=player;
            next.trigger.card=trigger.card;
            game.delayx();
        }
        delete player.equiping;
    },
                group:"ffengnu",
            },
            ffengnu:{
                audio:"ext:动漫:2",
                audioname:["sp_sunshangxiang","re_sunshangxiang"],
                trigger:{
                    player:"loseAfter",
                },
                forced:true,
                filter:function(event,player){
        return event.es&&event.es.length>0;
    },
                content:function(){
        "step 0"
        event.count=trigger.es.length;
        "step 1"
        event.count--;
       
        player.loseHp();
        player.draw(2);
        player.say("可恶！给我拿回来！");
        "step 2"
        if(event.count>0){
            player.chooseBool(get.prompt2('ffennu')).set('frequentSkill','ffennu').ai=lib.filter.all;
        }
        "step 3"
        if(result.bool){
            player.logSkill('ffennu');
            event.goto(1);
        }
    },
                ai:{
                    noe:true,
                    reverseEquip:true,
                    effect:{
                        target:function(card,player,target,current){
                if(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];
            },
                    },
                },
            },
            bbaoguang:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                forced:true,
                content:function(){

         player.loseHp();
    },
            },
            dmliyong:{
                enable:"phaseUse",
                usable:1,
                audio:"ext:动漫:2",
                position:"he",
                filterCard:function(card){
        return get.name(card)=='sha';
    },
                filter:function(event,player){
        return player.countCards('h','sha')>0;
    },
                check:function(card){return 8-get.value(card)},
                selectTarget:1,
                multitarget:true,
                discard:false,
                prepare:"give",
                filterTarget:function(card,player,target){
        if(ui.selected.targets.length==0){
            return player!=target;
        }
        else{
            return lib.filter.filterTarget({name:'sha'},ui.selected.targets[0],target);
        }
    },
                content:function(){
        "step 0"
        targets[0].gain(cards,player);
        "step 1"
            targets[0].addTempSkill('qizi','targets.phaseEnd');
 },
                ai:{
                    order:2,
                    result:{
                        target:-1,
                    },
                },
            },
            qiyue:{
                audio:"ext:动漫:2",
                usable:1,
                nobracket:true,
                enable:"phaseUse",
                filter:function(event,player){
        if(!player.storage.qiyue) return true;
        return game.hasPlayer(function(current){
            return !player.storage.qiyue.contains(current);
        });
    },
                init:function(player){
        if(!player.storage.qiyue) player.storage.qiyue=[];
    },
                filterTarget:function(card,player,target){
        return (!player.storage.qiyue||!player.storage.qiyue.contains(target));
    },
                content:function(){
        
player.say( ["服从我。","让我支配你——！"].randomGet() );
        if(!player.storage.qiyue) player.storage.qiyue=[];
        player.storage.qiyue.push(target);
        player.storage.qiyue.sortBySeat();
        player.markSkill('qiyue');
        player.gain(target.getCards('h'),target,'giveAuto');
      
        player.addSkill('gress2');
        player.storage.gress=target;
    },
                check:function(card){return 8-get.value(card)},
                intro:{
                    content:"已对$发动过〖Gress〗",
                },
                ai:{
                    order:10,
                    result:{
                        player:function(player){
                if(player.classList.contains('turnedover')) return 10;
                return 0;
            },
                        target:function(player,target){
                if(target.countCards('h')>target.hp) return target.hp-target.countCards('h');
                return 0;
            },
                    },
                    threaten:1.5,
                    effect:{
                        target:function(card){
                if(card.name=='guiyoujie') return [0,2];
            },
                    },
                },
            },
            "gress2":{
                trigger:{
                    player:"phaseUseEnd",
                },
                forced:true,
                popup:false,
                audio:"ext:动漫:false",
                content:function(){
        "step 0"
            var cards=player.getCards('he');
        player.removeSkill('gress2');
        if(player.storage.gress.classList.contains('dead')||player.storage.gress.hp<=0||cards.length==0){
            event.finish();
        }
        else{
            if(cards.length<player.storage.gress.hp) event._result={bool:true,cards:cards};
            else player.chooseCard('he',true,player.storage.gress.hp,'Gress：选择要交给'+get.translation(player.storage.gress)+'的牌');
        }
        "step 1"
        player.storage.gress.gain(result.cards,player);
        player.$give(result.cards.length,player.storage.gress);
    },
            },
            renfeng:{
                audio:"ext:动漫:2",
                shaRelated:true,
                trigger:{
                    player:"useCardToPlayered",
                },
                check:function(event,player){
        return get.attitude(player,event.target)<=0;
    },
                filter:function(event,player){
        return event.card.name=='sha';
    },
                logTarget:"target",
                content:function(){
        "step 0"
        player.say("必杀忍蜂!"),
        player.judge(function(card){
            if(get.zhu(_status.event.player,'shouyue')){
                if(get.suit(card)!='spade') return 2;
            }
            else{
                if(get.color(card)=='red') return 2;
            }
            return -0.5;
        });
        "step 1"
        if(result.bool){
            trigger.getParent().directHit.add(trigger.target);
        }
    },
            },
            liushi:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                forced:true,
                content:function(){
player.say( ["我的时间不多了......","未来只能靠你们了......"].randomGet() );
         
         loseMaxHp();
    },
            },
            chuanshou:{
                audio:"ext:动漫:2",
                enable:"phaseUse",
                filterCard:true,
                selectCard:[1,Infinity],
                discard:false,
                lose:false,
                delay:0,
                filterTarget:function(card,player,target){
        return player!=target;
    },
                check:function(card){
        if(ui.selected.cards.length>1) return 0;
        if(ui.selected.cards.length&&ui.selected.cards[0].name=='du') return 0;
        if(!ui.selected.cards.length&&card.name=='du') return 20;
        var player=get.owner(card);
        var num=0;
        var evt2=_status.event.getParent();
        var num=0;
        player.getHistory('lose',function(evt){
            if(evt.getParent().skill=='chuanshou'&&evt.getParent(3)==evt2) num+=evt.cards.length;
        });
        if(player.hp==player.maxHp||num>1||player.countCards('h')<=1){
            if(ui.selected.cards.length){
                return -1;
            }
            var players=game.filterPlayer();
            for(var i=0;i<players.length;i++){
                if(players[i].hasSkill('haoshi')&&
                    !players[i].isTurnedOver()&&
                    !players[i].hasJudge('lebu')&&
                    get.attitude(player,players[i])>=3&&
                    get.attitude(players[i],player)>=3){
                    return 11-get.value(card);
                }
            }
            if(player.countCards('h')>player.hp) return 10-get.value(card);
            if(player.countCards('h')>2) return 6-get.value(card);
            return -1;
        }
        return 10-get.value(card);
    },
                content:function(){
        target.gain(cards,player,'giveAuto');
        var evt2=event.getParent(3);
        var num=0;
        player.getHistory('lose',function(evt){
            if(evt.getParent(2).name=='chuanshou'&&evt.getParent(5)==evt2) num+=evt.cards.length;
        });
 if(num<2&&num+cards.length>1) player.recover();
    },
                ai:{
                    order:function(skill,player){
            if(player.hp<player.maxHp&&player.storage.rende<2&&player.countCards('h')>1){
                return 10;
            }
            return 1;
        },
                    result:{
                        target:function(player,target){
                if(target.hasSkillTag('nogain')) return 0;
                if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
                    if(target.hasSkillTag('nodu')) return 0;
                    return -10;
                }
                if(target.hasJudge('lebu')) return 0;
                var nh=target.countCards('h');
                var np=player.countCards('h');
                if(player.hp==player.maxHp||player.storage.rende<0||player.countCards('h')<=1){
                    if(nh>=np-1&&np<=player.hp&&!target.hasSkill('haoshi')) return 0;
                }
                return Math.max(1,5-nh);
            },
                    },
                    effect:{
                        target:function(card,player,target){
                if(player==target&&get.type(card)=='equip'){
                    if(player.countCards('e',{subtype:get.subtype(card)})){
                        var players=game.filterPlayer();
                        for(var i=0;i<players.length;i++){
                            if(players[i]!=player&&get.attitude(player,players[i])>0){
                                return 0;
                            }
                        }
                    }
                }
            },
                    },
                    threaten:0.8,
                },
            },
            dmyanwu:{
                audio:"ext:动漫:1",
                trigger:{
                    source:"damageBegin1",
                },
                filter:function(event){
        return event.card&&event.card.name=='sha'&&get.color(event.card)=='red'&&event.notLink();
    },
                forced:true,
                content:function(){
        player.say("龙炎舞!"),
        trigger.num++;
    },
                mod:{
                    suit:function(card,suit){
            if(suit=='spade') return 'heart';
        },
                },
            },
            dmjiefeng:{
                skillAnimation:true,
                animationColor:"wood",
                audio:"ext:动漫:2",
                juexingji:true,
                derivation:["reyingzi","gzyinghun"],
                unique:true,
                trigger:{
                    player:"recoverAfter",
                },
                filter:function(event,player){
        return player.hp>=12&&!player.storage.jiefeng;
    },
                forced:true,
                content:function(){
     
        
        game.log(player,'获得了','#g【恶魔之力】')
        player.init('emshengzhu');

        player.awakenSkill(event.name);
        player.storage[event.name]=true;
    },
                ai:{
                    threaten:function(player,target){
            if(target.hp==1) return 2;
            return 0.5;
        },
                    maixie:true,
                    effect:{
                        target:function(card,player,target){
                if(!target.hasFriend()) return;
                if(get.tag(card,'damage')==1&&target.hp==2&&!target.isTurnedOver()&&
                _status.currentPhase!=target&&get.distance(_status.currentPhase,target,'absolute')<=3) return [0.5,1];
            },
                    },
                },
            },
            emzl:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseDrawBegin2",
                },
                frequent:true,
                filter:function(event,player){
        return !event.numFixed;
    },
                content:function(){
        
        trigger.num+=1+Math.floor(player.countCards('e')/2);
    },
            },
            shoutu:{
                skillAnimation:true,
                enable:"phaseUse",
                filter:function(event,player){
        return !player.storage.shoutu;
    },
                filterTarget:function(card,player,target){
        return target!=player;
    },
                content:function(){
        player.say('叫师父。');
        player.awakenSkill('shoutu');

        player.addSkill('shoutu2');
        target.addSkill('shoutu2');

        target.marks.heqin=target.markCharacter(player,{
            name:'师徒',
            content:'摸牌阶段摸牌数+1'
        });
        game.addVideo('markCharacter',target,{
            name:'师徒',
            content:'摸牌阶段摸牌数+1',
            id:'shoutu',
            target:player.dataset.position
        });

        player.storage.shoutu=target;
        target.storage.shoutu=player;

        player.marks.heqin=player.markCharacter(target,{
            name:'师徒',
            content:'摸牌阶段摸牌数+1'
        });
        game.addVideo('markCharacter',player,{
            name:'师徒',
            content:'摸牌阶段摸牌数+1',
            id:'shoutu',
            target:target.dataset.position
        });
    },
                ai:{
                    order:1,
                    result:{
                        target:1,
                    },
                },
            },
            dnskzd:{
                trigger:{
                    player:"phaseJieshuBegin",
                },
                direct:true,
                nobracket:true,
                content:function(){
     player.say( ["如果那样的话……","嘿嘿，真是那样就好了。"].randomGet() );
    game.filterPlayer(function(current){
        return current != player;}).randomGet().loseHp();
    },
            },
            jjpy:{
                audio:"ext:动漫:2",
                direct:true,
                nobracket:true,
                filter:function(event,player){
        return (event.card.name=='sha'||get.type(event.card)=='trick')&&event.targets&&event.targets.length>1;
    },
                check:function(event,player){
        return event.getParent().excluded.contains(player)||get.tag(event.card,'multineg')||get.effect(player,event.card,event.player,player)<=0;
    },
                trigger:{
                    target:"useCardToTargeted",
                },
                content:function(){
        player.say( ["你们也太无趣了！","外星人和超能力者，请找我吧！"].randomGet() );
        trigger.getParent().excluded.add(player);
        player.draw();
    },
                ai:{
                    effect:{
                        target:function(card){
                if(get.type(card)!='trick') return;
                if(card.name=='tiesuo') return [0,0];
                if(card.name=='yihuajiemu') return [0,1];
                if(get.tag(card,'multineg')) return [0,2];
            },
                    },
                },
            },
            dmzhuisha:{
                trigger:{
                    player:"turnOverEnd",
                },
                forced:true,
                audi:2,
                content:function(){
        
     
           player.chooseUseTarget({name:'sha'},false,'是否视为使用一张【杀】？','nodistance');
      
 
        player.chooseUseTarget({name:'sha'},false,'是否视为使用一张【杀】？','nodistance');
    },
                group:"suolongzhaoshi",
            },
            dmfanteng:{
                trigger:{
                    player:"phaseUseBegin",
                },
                forced:true,
                audio:"ext:动漫:2",
                content:function (){
      
        player.turnOver();

    },
                group:"dmfanteng2",
            },
            "dmfanteng2":{
                trigger:{
                    source:"dieAfter",
                },
                audio:"ext:动漫:2",
                forced:true,
                content:function(){
        player.turnOver();
    },
            },
            suolongzhaoshi:{
                audio:"ext:动漫:2",
                shaRelated:true,
                direct:true,
                nobracket:true,
                trigger:{
                    player:"useCardToPlayered",
                },
                check:function(event,player){
        return get.attitude(player,event.target)<=0;
    },
                filter:function(event,player){
        return event.card.name=='sha';
    },
                logTarget:"target",
                content:function(){
        player.say( ["犀角！","狮子歌歌！","三千世界！","鬼斩！","龙卷风！","虎狩！","登楼！","百八烦恼风！"].randomGet() );
    },
            },
            "shoutu2":{
                trigger:{
                    player:"phaseDrawBegin",
                },
                forced:true,
                content:function(){
        trigger.num++;
    },
                group:"shoutu3",
            },
            "shoutu3":{
                trigger:{
                    player:"dieBegin",
                },
                forced:true,
                popup:false,
                content:function(){
            player.removeSkill('shoutu2');
            player.unmarkSkill('shoutu');
            if(player.storage.dadang){
                player.storage.heqin.removeSkill('shoutu2');
                player.storage.heqin.unmarkSkill('shoutu');
            }
        
    },
            },
            dmliangkuai:{
                nobracket:true,
                usable:1,
                audio:"ext:动漫:2",
                enable:"phaseUse",
                logTarget:"source",
                content:function(){ 
        player.chooseToDiscard(1,true);
           
    player.say( ["凉快！整家伙！","我们需要个厉害点的玩意儿！"].randomGet() );

player.gain(get.cardPile(function(card){
            return get.type(card,'equip')=='equip';
        }),'gain2');
    },
                ai:{
                    order:5,
                    result:{
                        player:2,
                    },
                },
            },
            dmkawayi:{
                nobracket:true,
                usable:1,
                audio:"ext:动漫:2",
                enable:"phaseUse",
                content:function(){ 
        player.chooseToDiscard(1,true);
           
    player.say( ["卡哇伊！制订方案！","卡哇伊！分析出最优结果！"].randomGet() );

player.gain(get.cardPile(function(card){
            return get.type(card,'trick')=='trick';
        }),'gain2');
    },
                ai:{
                    order:4,
                    result:{
                        player:2,
                    },
                },
            },
            dmlaoda:{
                nobracket:true,
                usable:1,
                audio:"ext:动漫:2",
                enable:"phaseUse",
                content:function(){ 
        player.chooseToDiscard(1,true);
           player.say( ["行动起来，兄弟们！","按我命令行事！"].randomGet() );
    

player.gain(get.cardPile(function(card){
            return get.type(card,'basic')=='basic';
        }),'gain2');
    },
                ai:{
                    order:2,
                    result:{
                        player:1,
                    },
                },
            },
            dmcainiao:{
                nobracket:true,
                usable:1,
                audio:"ext:动漫:2",
                enable:"phaseUse",
                content:function(){ 
    
      player.say( ["菜鸟！快去当诱饵！","该卖萌了菜鸟！"].randomGet() );     
    

var card=get.cardPile('lebu','field');
        if(card){
            player.gain(card,'gain2','log');
        }        player.removeSkill('dmcainiao');
    },
                ai:{
                    order:1,
                    result:{
                        player:2,
                    },
                },
            },
            dmglzs:{
                trigger:{
                    player:"phaseDrawBegin",
                },
                filter:function(event,player){
        return game.hasPlayer(function(current){
            return current.sex=='female';
        });
    },
                nobracket:true,
                forced:true,
                content:function(){
        player.say( ["我已经看到结局了。","下一步已经很明确了。"].randomGet() );  
        var num=game.countPlayer(function(current){
            return current.sex=='female';
        
        });
        
        if(num>2) num=3;        trigger.num+=num;
        player.logSkill=("dmglzs");
    },
                ai:{
                    threaten:function(){
            var num=game.countPlayer(function(current){
                return current.sex=='female';
            });
            switch(num){
                case 0:return 1;
                case 1:return 1.3;
                default:return 2;
            }
        },
                },
            },
            dmszsj:{
                audio:"ext:动漫:2",
                nobracket:true,
                trigger:{
                    player:"damageEnd",
                },
                filter:function(event,player){
        return event.source.sex=='male';
    },
                direct:true,
                content:function(){
     player.say( ["现实是个垃圾游戏。","这是只有神知道的世界！"].randomGet() );  
      trigger.source.sex='female';  
    },
            },
            dmtiaoxin:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                direct:true,
                content:function (){
        "step 0"
        player.chooseTarget(get.prompt('挑衅'),'令一名其他角色下回合摸牌阶段少摸一张牌、【杀】造成的伤害+1，直到其回合结束。',function(card,player,target){return player!=target;}).set('ai',function(target){
            return get.attitude(_status.event.player,target);
        });
        "step 1"
        player.say("你还差的远呢！");
        if(result.bool){
           result.targets[0].addTempSkill('dmshengqi',{player:'phaseAfter'});         
        }
    

    },
                check:function(event,player){
        return (event.player.countCards('h') <= 2 && get.attitude(player,event.player) < 0)},
            },
            dmshengqi:{
                audio:"ext:动漫:2",
                forced:true,
                trigger:{
                    player:"phaseDrawBegin2",
                },
                check:function(event,player){
        if(player.countCards('h')<3) return false;
        if(!player.hasSha()) return false;
        return game.hasPlayer(function(current){
            return get.attitude(player,current)<0&&player.canUse('sha',current);
        });
    },
                filter:function(event,player){
        return !event.numFixed&&event.num>0;
    },
                content:function(){
        player.addTempSkill('dmshengqi2','phaseJieshuBegin');
        trigger.num--;
    },
            },
            "dmshengqi2":{
                trigger:{
                    source:"damageBegin1",
                },
                filter:function(event){
        return event.card&&(event.card.name=='sha')&&event.notLink();
    },
                forced:true,
                content:function(){
        trigger.num++;
    },
                ai:{
                    damageBonus:true,
                },
            },
            dmsuibu:{
                group:["dmsuibu_sha","dmsuibu_shan","dmsuibu_draw"],
                subSkill:{
                    draw:{
                        trigger:{
                            player:["useCard","respond"],
                        },
                        forced:true,
                        popup:false,
                        filter:function(event,player){
                if(!get.zhu(player,'shouyue')) return false;
                return event.skill=='dmsuibu_sha'||event.skill=='dmsuibu_shan';
            },
                        content:function(){
                player.draw();
                player.storage.fanghun2++;
            },
                        sub:true,
                    },
                    sha:{
                        enable:["chooseToUse","chooseToRespond"],
                        filterCard:{
                            name:"shan",
                        },
                        viewAs:{
                            name:"sha",
                        },
                        viewAsFilter:function(player){
                if(!player.countCards('h','shan')) return false;
            },
                        prompt:"将一张闪当杀使用或打出",
                        check:function(){return 1},
                        ai:{
                            effect:{
                                target:function(card,player,target,current){
                        if(get.tag(card,'respondSha')&&current<0) return 0.6
                    },
                            },
                            respondSha:true,
                            skillTagFilter:function(player){
                    if(!player.countCards('h','shan')) return false;
                },
                            order:function(){
                    return get.order({name:'sha'})+0.1;
                },
                            useful:-1,
                            value:-1,
                            basic:{
                                useful:[5,1],
                                value:[5,1],
                            },
                            result:{
                                target:function(player,target,card,isLink){
                        if(!isLink&&player.hasSkill('jiu')&&!target.hasSkillTag('filterDamage',null,{
                            player:player,
                            card:card,
                            jiu:true,
                        })){
                            if(get.attitude(player,target)>0){
                                return -7;
                            }
                            else{
                                return -4;
                            }
                        }
                        return -1.5;
                    },
                            },
                            tag:{
                                respond:1,
                                respondShan:1,
                                damage:function(card){
                        if(card.nature=='poison') return;
                        return 1;
                    },
                                natureDamage:function(card){
                        if(card.nature) return 1;
                    },
                                fireDamage:function(card,nature){
                        if(card.nature=='fire') return 1;
                    },
                                thunderDamage:function(card,nature){
                        if(card.nature=='thunder') return 1;
                    },
                                poisonDamage:function(card,nature){
                        if(card.nature=='poison') return 1;
                    },
                            },
                        },
                        sub:true,
                    },
                    shan:{
                        enable:["chooseToRespond","chooseToUse"],
                        filterCard:{
                            name:"sha",
                        },
                        viewAs:{
                            name:"shan",
                        },
                        prompt:"将一张杀当闪使用或打出",
                        check:function(){return 1},
                        viewAsFilter:function(player){
                if(!player.countCards('h','sha')) return false;
            },
                        ai:{
                            respondShan:true,
                            skillTagFilter:function(player){
                    if(!player.countCards('h','sha')) return false;
                },
                            effect:{
                                target:function(card,player,target,current){
                        if(get.tag(card,'respondShan')&&current<0) return 0.6
                    },
                            },
                            order:4,
                            useful:-1,
                            value:-1,
                            basic:{
                                useful:[7,2],
                                value:[7,2],
                            },
                            result:{
                                player:1,
                            },
                        },
                        sub:true,
                    },
                },
            },
            dmqsyz:{
                nobracket:true,
                audio:"ext:动漫:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                filter:function(event,player){
        return player.hp<player.maxHp;
    },
                content:function(){
      player.say( ["要活下去！为了小生所背负的一切！","活着的意志比什么都强！"].randomGet() );
        event.num=player.getDamagedHp();
        player.draw(event.num);
        
},
            },
            dmszjw:{
                nobracket:true,
                audio:"ext:动漫:2",
                trigger:{
                    player:"damageBegin3",
                    source:"damageBegin1",
                },
                forced:true,
                filter:function(event,player){
        return player.isMaxHandcard(true);
    },
                content:function(){
        player.say( ["剑是凶器，剑技是杀人技！","小生早已有所觉悟！"].randomGet() );
        trigger.num++;
    },
                ai:{
                    presha:true,
                },
            },
            dmzjsam:{
                nobracket:true,
                mod:{
                    cardname:function(card,player){
            if(card.name=='tao') return 'wanjian';
        },
                },
                ai:{
                    skillTagFilter:function(player){
            if(!player.countCards('h','tao')) return false;
        },
                    respondSha:true,
                },
                audio:"ext:动漫:2",
                trigger:{
                    player:["useCard1","respond"],
                },
                firstDo:true,
                forced:true,
                filter:function(event,player){
        return event.card.name=='wanjian'&&!event.skill&&
        event.cards.length==1&&event.cards[0].name=='tao';
    },
                content:function(){},
                group:"dmzjsam2",
            },
            "dmzjsam2":{
                nobracket:true,
                mod:{
                    cardname:function(card,player){
            if(card.name=='jiu') return 'wanjian';
        },
                },
                ai:{
                    skillTagFilter:function(player){
            if(!player.countCards('h','jiu')) return false;
        },
                    respondSha:true,
                },
                audio:"ext:动漫:2",
                trigger:{
                    player:["useCard1","respond"],
                },
                firstDo:true,
                forced:true,
                filter:function(event,player){
        return event.card.name=='wanjian'&&!event.skill&&
        event.cards.length==1&&event.cards[0].name=='jiu';
    },
                content:function(){},
            },
            dmxingfen:{
                trigger:{
                    source:"damageSource",
                },
                filter:function(event,player){
        return get.distance(player,event.player)<=1&&event.num>0;
    },
                direct:true,
                content:function(){
        'step 0'
            player.say( ["我～我在宠爱你们♡","爱～这就是爱的感觉吗♡"].randomGet() );
        event.num=trigger.num;
        'step 1'
        player.chooseDrawRecover(get.prompt('dmxingfen')).set('prompt2','摸一张牌或回复1点体力');
        'step 2'
        
            event.num--;
            if(event.num>0){
                event.goto(1);
            }
        
    },
            },
            dmjihun:{
                audio:"ext:动漫:3",
                trigger:{
                    player:"damageEnd",
                },
                direct:true,
                filter:function(event,player){
        return (event.source&&event.source.countGainableCards(player,'he')&&event.num>0&&event.source!=player);
    },
                content:function(){
        player.say("(。•ˇˍˇ•。)");
        player.gainPlayerCard([1,trigger.num],get.prompt('dmjihun',trigger.source),trigger.source,get.buttonValue,'he').set('logSkill',['heimao',trigger.source]);
    },
                ai:{
                    "maixie_defend":true,
                    effect:{
                        target:function(card,player,target){
                if(player.countCards('he')>1&&get.tag(card,'damage')){
                    if(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];
                    if(get.attitude(target,player)<0) return [1,1];
                }
            },
                    },
                },
            },
            dmyanling:{
                trigger:{
                    global:"judge",
                },
                filter:function(event,player){
        return player.countCards('he')>0;
    },
                direct:true,
                content:function(){
        "step 0"
        
        player.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+
        get.translation(trigger.player.judging[0])+'，'+get.prompt('dmyanling'),'he',function(card){
            
            var player=_status.event.player;
            var mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);
            if(mod2!='unchanged') return mod2;
            var mod=game.checkMod(card,player,'unchanged','cardRespondable',player);
            if(mod!='unchanged') return mod;
            return true;
        }).set('ai',function(card){
            var trigger=_status.event.getTrigger();
            var player=_status.event.player;
            var judging=_status.event.judging;
            var result=trigger.judge(card)-trigger.judge(judging);
            var attitude=get.attitude(player,trigger.player);
            if(attitude==0||result==0) return 0;
            if(attitude>0){
                return result;
            }
            else{
                return -result;
            }
        }).set('judging',trigger.player.judging[0]);
        "step 1"
        
        if(result.bool){
            player.respond(result.cards,'highlight','dmyanling','noOrdering');
        }
        else{
            event.finish();
        }
        "step 2"
        player.say("（∩▽∩）");
        if(result.bool){
            player.$gain2(trigger.player.judging[0]);
            player.gain(trigger.player.judging[0]);
            trigger.player.judging[0]=result.cards[0];
            trigger.orderingCards.addArray(result.cards);
            game.log(trigger.player,'的判定牌改为',result.cards[0]);
        }
        "step 3"
        game.delay(2);
    },
                ai:{
                    rejudge:true,
                    tag:{
                        rejudge:1,
                    },
                },
            },
            dmfuhuo:{
                audio:"axt:动漫:1",
                usable:1,
                enable:"phaseUse",
                filter:function (event,player){
return game.dead.length>0;
},
                notarget:true,
                content:function (){
                "step 0"
                 var list=[];
        player.say("……");
                 for(var i=0;i<game.dead.length;i++){
                     list.push(game.dead[i].name);
                 }                 player.chooseButton(ui.create.dialog('选择1名角色复活',[list,'character']),function(button){
                 for(var i=0;i<game.dead.length&&game.dead[i].name!=button.link;i++);
                     return ai.get.attitude(_status.event.player,game.dead[i]);
                 }); 
                "step 1"
                 if(result.bool){
                     for(var i=0;i<game.dead.length&&game.dead[i].name!=result.buttons[0].link;i++);
                     var dead=game.dead[i];
                     player.logSkill('fuhuo',dead);
                     dead.revive(dead.maxHp);
                     
                }
        player.removeSkill('dmfuhuo');
    },
                ai:{
                    order:10,
                    threaten:10,
                    result:{
                        player:10,
                    },
                },
            },
            dmbanjia:{
                trigger:{
                    global:"gameStart",
                },
                frequent:true,
                content:function(){
        player.changeHujia(3)

    
  
    },
            },
            dmbaoguang:{
                audio:"ext:动漫:1",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                forced:true,
                content:function(){

         player.loseHp();
    },
            },
            dmbiange:{
                audio:"ext:动漫:2",
                unique:true,
                enable:"phaseUse",
                limited:true,
                skillAnimation:"epic",
                animationColor:"thunder",
                filterTarget:function(card,player,target){
        return target!=player;
    },
                selectTarget:-1,
                multitarget:true,
                multiline:true,
                content:function(){
        "step 0"
        player.say("历史的巨轮将由我推动！");
        player.awakenSkill('dmbiange');
        event.current=player.next;
        event.currented=[];
        "step 1"
        event.currented.push(event.current);
        event.current.animate('target');
        event.current.chooseToUse('变革：使用一张杀或流失一点体力',{name:'sha'},function(card,player,target){
            if(player==target) return false;
            if(!player.canUse('sha',target)) return false;
            if(get.distance(player,target)<=1) return true;
            if(game.hasPlayer(function(current){
                return current!=player&&get.distance(player,current)<get.distance(player,target);
            })){
                return false;
            }
            return true;
        });
        "step 2"
        if(result.bool==false) event.current.loseHp();
        event.current=event.current.next;
        if(event.current!=player&&!event.currented.contains(event.current)){
            game.delay(0.5);
            event.goto(1);
        }
    },
                ai:{
                    order:1,
                    result:{
                        player:function(player){
                if(lib.config.mode=='identity'&&game.zhu.isZhu&&player.identity=='fan'){
                    if(game.zhu.hp==1&&game.zhu.countCards('h')<=2) return 1;
                }
                var num=0;
                var players=game.filterPlayer();
                for(var i=0;i<players.length;i++){
                    var att=get.attitude(player,players[i]);
                    if(att>0) att=1;
                    if(att<0) att=-1;
                    if(players[i]!=player&&players[i].hp<=3){
                        if(players[i].countCards('h')==0) num+=att/players[i].hp;
                        else if(players[i].countCards('h')==1) num+=att/2/players[i].hp;
                        else if(players[i].countCards('h')==2) num+=att/4/players[i].hp;
                    }
                    if(players[i].hp==1) num+=att*1.5;
                }
                if(player.hp==1){
                    return -num;
                }
                if(player.hp==2){
                    return -game.players.length/4-num;
                }
                return -game.players.length/3-num;
            },
                    },
                },
                mark:true,
                intro:{
                    content:"limited",
                },
                init:function(player,skill){
        player.storage[skill]=false;
    },
            },
            dmyuhuo:{
                audio:"ext:动漫:2",
                trigger:{
                    player:"damageBegin4",
                },
                filter:function(event){
        return event.nature=='fire';
    },
                forced:true,
                content:function(){
        player.say("笨蛋～");
        trigger.cancel();
    },
                ai:{
                    nofire:true,
                    effect:{
                        target:function(card,player,target,current){
                if(get.tag(card,'fireDamage')) return 'zerotarget';
            },
                    },
                },
            },
            dmhxyyzsn:{
                forced:true,
                nobracket:true,
                trigger:{
                    target:"useCardToTargeted",
                },
                direct:true,
                filter:function(event,player){
        return event.card.name=='sha'&&event.player.isAlive();
    },
                content:function(){
        
        player.say( ["不、不要看我……","嘤呜……"].randomGet() );  
        player.draw(2);
        player.turnOver();
    },
                ai:{
                    threaten:1.1,
                },
                group:["dmhxyyzsn2","dmhxyyzsn3"],
            },
            "dmhxyyzsn2":{
                audio:"ext:动漫:2",
                firstDo:true,
                nobracket:true,
                audioname:["re_zhangfei","guanzhang","xiahouba"],
                trigger:{
                    player:"useCard1",
                },
                forced:true,
                filter:function(event,player){
        return !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';
    },
                content:function(){
        
        trigger.audioed=true;
    },
                mod:{
                    cardUsable:function(card,player,num){
            if(card.name=='sha') return Infinity;
        },
                },
                ai:{
                    unequip:true,
                    skillTagFilter:function(player,tag,arg){
            if(!get.zhu(player,'shouyue')) return false;
            if(arg&&arg.name=='sha') return true;
            return false;
        },
                },
                group:"dmhxyyzsn3",
            },
            dmgss:{
                forced:true,
                nobracket:true,
                audio:"ext:动漫:2",
                trigger:{
                    player:"damageEnd",
                },
                filter:function(event,player){
        return event.source&&event.source.isIn()&&event.source!=player&&!event.source.hasJudge('lebu');
    },
                check:function(event,player){
        return get.attitude(player,event.source)<=0;
    },
                logTarget:"source",
                content:function(){
     
        trigger.source.goMad({player:"phaseAfter"});
        
    },
                ai:{
                    threaten:4,
                },
            },
            "dmhxyyzsn3":{
                mod:{
                    attackFrom:function(){
            return -Infinity;
        },
                },
            },
            dmhanyang:{
                mod:{
                    maxHandcard:function(player,num){
            return num+1;
        },
                },
            },
        },
        translate:{
            jueduixuanxiang:"绝对选项",
            "jueduixuanxiang_info":"锁定技，当你使用牌后，你根据牌名会触发各种选项，选项内容对应的效果不同，弃置足够的牌视为执行第一项，否则执行第二项。每种牌名每轮最多触发一次。",
            caonima:"选择结束",
            "caonima_info":"",
            jueduixuanxiangtwo:"绝对选项2",
            "jueduixuanxiangtwo_info":"",
            jueduixuanxiangtree:"绝对选项3",
            "jueduixuanxiangtree_info":"",
            jueduixuanxiangfour:"绝对选项4",
            "jueduixuanxiangfour_info":"",
            shenzhu:"神助",
            "shenzhu_info":"锁定技，当你使用牌后，你有二分之一几率摸三张牌并回复1点体力。每回合最多触发一次。",
            siwangbiji:"死亡笔记",
            "siwangbiji_info":"出牌阶段开始时，你可以将一张手牌置于武将牌上，称之为「死」。然后若你的「死」包含四种花色，则你须移去四张花色不同的「死」并选择一名其他角色，该角色失去999点体力。",
            xuangaosiwang:"宣告死亡",
            "xuangaosiwang_info":"",
            jueduixuanxiangsix:"绝对选项6",
            "jueduixuanxiangsix_info":"",
            shaixuan:"筛选",
            "shaixuan_info":"摸牌阶段，你可以观看牌堆顶的三张牌，然后将其中的一张牌置于牌堆顶，并将其余的牌置于牌堆底。",
            muhou:"幕后",
            "muhou_info":"锁定技，你不能成为黑色锦囊牌的目标。",
            jielu:"揭露",
            "jielu_info":"你死亡时，你可以选择一名角色，该角色回复所有体力，然后获得技能“曝光”（锁定技，回合结束后，你失去1点体力）。",
            tuili:"推理",
            "tuili_info":"当你使用【杀】后，你可以获得一张锦囊牌。",
            jueduixuanxiangfive:"绝对选项5",
            "jueduixuanxiangfive_info":"",
            shenzhong:"慎重",
            "shenzhong_info":"出牌阶段开始时，你可以先摸X张牌再弃置X-1张牌，若你以此法弃置装备区的牌，你获得一张【无懈可击】（X为你于本局游戏内使用过的装备牌数且最大为10）。",
            dunlai:"圣盾",
            "dunlai_info":"锁定技，回合开始时，你废除武器区，获得“仁王盾”。",
            baohu:"守护",
            "baohu_info":"每当你距离1以内的角色成为杀的目标后，你可以摸一张牌。若如此做，你交给其一张牌并展示之，若该牌为装备牌，该角色可以使用此牌。",
            bujv:"布局",
            "bujv_info":"结束阶段，你可以将手牌补至X张(X为现存的势力数）。",
            haipa:"害怕",
            "haipa_info":"锁定技，当你成为杀的目标后，你摸一张牌。",
            lixing:"理性",
            "lixing_info":"每当你受到1点伤害后，你可以摸两张牌，然后可以将至多两张手牌交给其他角色。",
            sjxs:"收集线索",
            "sjxs_info":"锁定技，你根据装备区里牌的花色数获得以下技能：1种或以上-克己；2种或以上-筛选；3种或以上-推理；4种-集智。",
            zkeji:"克己",
            "zkeji_info":"若你于出牌阶段内没有过使用【杀】，则你可以跳过弃牌阶段。",
            zshaixuan:"筛选",
            "zshaixuan_info":"摸牌阶段，你可以观看牌堆顶的三张牌，然后将其中的一张牌置于牌堆顶，并将其余的牌置于牌堆底。",
            ztuili:"推理",
            "ztuili_info":"当你使用【杀】后，你可以获得一张锦囊牌。",
            zjizhi:"集智",
            "zjizhi_info":"当你使用一张非转化的普通锦囊牌时，你可以摸一张牌。",
            jieneng:"节能",
            "jieneng_info":"锁定技，摸牌阶段，你少摸一张牌；结束阶段，你摸两张牌。",
            bjieneng:"节能",
            "bjieneng_info":"锁定技，摸牌阶段，你少摸一张牌。",
            qizi:"棋子",
            "qizi_info":"锁定技，结束阶段，你失去1点体力。",
            jiaoshe:"交涉",
            "jiaoshe_info":"出牌阶段限一次，你可以与一名其他角色拼点。",
            tishen:"替身",
            "tishen_info":"限定技，当你处于濒死状态时，你可以弃置你区域内的所有牌并复原你的武将牌，然后摸三张牌并将体力回复至3点。",
            saohua:"情商",
            "saohua_info":"每当你受到一次伤害，你可以将一张乐不思蜀置入伤害来源的判定区",
            dkfw:"观测",
            "dkfw_info":"出牌阶段限一次，你可以令一名其他角色摸一张牌。然后，该角色可以使用此牌。",
            badao:"拔刀",
            "badao_info":"出牌阶段限一次，你可以将一张牌当【无中生有】，你以此法获得的牌本回合可以当【杀】使用。",
            wxty:"万象天引",
            "wxty_info":"出牌阶段限一次，你可以指定一名其他角色，然后随机获得其区域内的一张牌。若如此做，你的防御距离-1。",
            sltz:"神罗天征",
            "sltz_info":"摸牌阶段开始时，若有其他角色与你距离不大于1，则你可以放弃摸牌。若如此做，你的防御距离+X（X为势力数）。",
            rzyq:"一拳",
            "rzyq_info":"锁定技，当你使用【杀】对其他角色造成伤害时，该角色死亡。",
            rdl:"二刀流",
            "rdl_info":"锁定技，你的梅花【杀】无视距离，方片【杀】不计入次数限制。",
            fenshen:"分身",
            "fenshen_info":"转换技，①结束阶段，你可以执行一个额外的回合。②锁定技，当你受到伤害后，你弃置一张手牌，转换回①。",
            mingrentishen:"替身",
            "mingrentishen_info":"转换技，①结束阶段，你可以执行一个额外的回合。②锁定技，当你受到伤害后，你弃置一张手牌，转换回①。",
            luoxuan:"螺旋",
            "luoxuan_info":"当你使用【杀】指定目标后，你可以令其弃置一张牌。",
            wdzs:"无敌之师",
            "wdzs_info":"锁定技，若你装备了防具牌，防止你受到的伤害，若你装备了武器牌，你造成的伤害+1。",
            gthl:"钢铁洪流",
            "gthl_info":"当你受到伤害后，你可以获得一张装备牌。",
            hkj:"黑科技",
            "hkj_info":"出牌阶段，你可以展示一张未强化过的【诸葛连弩】或标准包/军争包/SP包中的防具牌，然后对其进行强化。当你处于濒死状态时，你可以重铸一张防具牌，将体力回复至1点。",
            sdz:"闪电战",
            "sdz_info":"准备阶段，你可以视为使用一张无距离限制的【杀】或【过河拆桥】。",
            hdz:"黄段子",
            "hdz_info":"锁定技，你对男性角色使用的【杀】无法被【闪】响应。",
            wangxiang:"妄想",
            "wangxiang_info":"每回合限一次。当你于出牌阶段使用的仅指定一个目标的牌结算后，你可以从牌堆中随机各获得一张点数为J、8的牌。",
            fjzh:"变身",
            "fjzh_info":"限定技，出牌阶段，你可以摸三张牌，变成迪迦奥特曼。",
            jsq:"计时器",
            "jsq_info":"锁定技，每回合结束时，你失去15点体力。",
            atgx:"哉佩利傲光线",
            "atgx_info":"限定技，出牌阶段，你可以对一名体力为1的其他角色造成2点伤害。",
            ltpd:"裸体派对",
            "ltpd_info":"结束阶段，你可以令任意名装备区没牌的角色各摸一张牌。",
            "badao_3":"拔刀3",
            "badao_3_info":"undefined",
            "badao_2":"拔刀2",
            "badao_2_info":"undefined",
            "shenzhong2":"慎重2",
            "shenzhong2_info":"undefined",
            "ltpd1":"裸体派对",
            "ltpd1_info":"",
            chuanjiao:"传教",
            "chuanjiao_info":"出牌阶段限一次，你可以将装备牌内的任意张牌置于一名其他角色的武将牌旁，称之为「淫」。该角色造成伤害时，其须移去一张「淫」，使此伤害+1。",
            baozou:"暴走",
            "baozou_info":"出牌阶段限一次，你可以弃置一张牌，然后你的攻击范围视为无限直到回合结束。若你以此法弃置的牌为装备牌，则你可以弃置一名其他角色的一张牌。",
            dmxisheng:"牺牲",
            "dmxisheng_info":"当你在其攻击范围内的其他角色使用【杀】指定目标后，你可以摸一张牌，然后将目标转移为你。",
            yinluan:"淫乱",
            "yinluan_info":"",
            jvren:"空中型",
            "jvren_info":"锁定技，你与体力值不大于你的角色距离为1。回合结束时，你摸一张牌。",
            "jvren2":"强力型",
            "jvren2_info":"锁定技，你使用【杀】和【决斗】造成的伤害+1。",
            ningshi:"外神的凝视",
            "ningshi_info":"出牌阶段限一次，你可以指定一名其他角色，其获得一张【闪】，然后弃置两张手牌。",
            fengkuang:"不可名状的恐惧",
            "fengkuang_info":"结束阶段，你可以令一名没有手牌的其他角色摸一张牌并进入混乱状态，直到其回合结束。",
            hhq:"豪火灭却",
            "hhq_info":"限定技，出牌阶段，你可以令任意名其他角色依次选择：打出一张【闪】；受到1点火属性伤害。",
            xznh:"须佐能乎",
            "xznh_info":"觉醒技，当你脱离濒死状态时，你获得3点护甲，然后你于你的每个准备阶段摸一张牌。",
            xiwang:"希望",
            "xiwang_info":"你的回合外，你可以将一张红色牌当做【桃】使用。",
            lyfg:"龙炎放歌",
            "lyfg_info":"限定技，出牌阶段，你可以对一名其他角色造成1点火焰伤害。",
            sszs:"瞬身之术",
            "sszs_info":"当你受到伤害后，你可以弃置一张手牌，然后对来源造成1点伤害。",
            ltjd:"立体机动",
            "ltjd_info":"每轮限一次，你可以在需要使用【杀】或【闪】时，视为使用一张【杀】或【闪】。锁定技，你计算与其他角色的距离-1。",
            qiege:"环绕切割",
            "qiege_info":"当你使用【杀】指定体力大于你的目标后，你可以令其失去1点体力。",
            ixa:"IXA",
            "ixa_info":"当你使用【杀】被【闪】抵消时，你可以摸一张牌，然后弃置目标角色的一张牌。",
            mingshen:"鸣神",
            "mingshen_info":"当你使用或打出一张【闪】时，你摸一张牌，然后你可以对一名其他角色造成一点雷电伤害",
            "xznh2":"须佐能乎",
            "xznh2_info":"锁定技，准备阶段，你摸一张牌。",
            zhan:"斩",
            "zhan_info":"",
            zengzhi:"增殖",
            "zengzhi_info":"锁定技，当你受到伤害后，你增加一点体力上限。",
            shishi:"食尸",
            "shishi_info":"锁定技，当其他角色死亡时，你回复所有体力。",
            "hkj2":"黑科技",
            "hkj2_info":"出牌阶段，你可以展示一张未强化过的【诸葛连弩】或标准包/军争包/SP包中的防具牌，然后对其进行强化。当你处于濒死状态时，你可以重铸一张防具牌，将体力回复至1点。",
            dmbenghuai:"崩坏",
            "dmbenghuai_info":"锁定技，结束阶段开始时，你失去1点体力，然后摸两张牌。",
            dmjinhua:"究极生物",
            "dmjinhua_info":"锁定技，当你受到伤害后，你从以下未拥有的技能中随机获得一个：英姿、闭月、毅重、咆哮、集智、义从。全部拥有后，你失去本技能。",
            jhyingzi:"英姿",
            "jhyingzi_info":"摸牌阶段，你可以多摸一张牌。",
            jhbiyue:"闭月",
            "jhbiyue_info":"结束阶段，你可以摸一张牌。",
            jhjizhi:"集智",
            "jhjizhi_info":"当你使用一张非转化的普通锦囊牌时，你可以摸一张牌。",
            jhpaoxiao:"咆哮",
            "jhpaoxiao_info":"锁定技，出牌阶段，你使用【杀】没有数量限制。",
            jhyicong:"义从",
            "jhyicong_info":"锁定技，只要你的体力值大于2点，你的进攻距离+1；只要你的体力值为2点或更低，你的防御距离+1。",
            jhyizhong:"毅重",
            "jhyizhong_info":"锁定技，当你的防具栏为空时，黑色的杀对你无效",
            baibaodai:"口袋",
            "baibaodai_info":"当有装备牌进入你的装备区时，你可以随机获得牌堆中的一张锦囊牌。",
            bangmang:"帮忙",
            "bangmang_info":"出牌阶段，你可以将任意张手牌交给其他角色。当你以此法于一回合内给出第二张牌时，你回复1点体力。",
            bhxt:"变换形态",
            "bhxt_info":"锁定技，准备阶段，你选择变成空中型（锁定技，你计算与体力不大于你的其他角色距离为1。回合结束时，你摸一张牌）或者强力型（锁定技，你使用【杀】和【决斗】造成的伤害+1）。",
            "躁动":"躁动",
            "躁动_info":"转换技，出牌阶段限一次，①你可以摸一张牌，然后弃置两张手牌。②你可以摸两张牌，然后弃置一张手牌。若如此做，直到本回合结束，你使用与弃置牌花色相同的牌无距离和次数限制",
            olol:"白金之星",
            "olol_info":"锁定技，出牌阶段，你使用【杀】没有数量限制。",
            thewhord:"世界",
            "thewhord_info":"当你失去最后的手牌时，你可以摸一张牌。",
            jiedan:"接单",
            "jiedan_info":"锁定技，你与体力值不大于你的角色的距离视为1。",
            wjtl:"杀不完的哥布林",
            "wjtl_info":"出牌阶段限一次，你可以对一名其他角色造成1点伤害，然后其于下回合结束时回复1点体力。",
            chuanxi:"喘息",
            "chuanxi_info":"回合结束时，你回复1点体力，然后失去此技能。",
            sy:"杀意",
            "sy_info":"回合结束时，你获得一张【杀】。",
            jh:"极寒",
            "jh_info":"当你受到伤害后，你可令一名其他角色摸X张牌（X为你已损失的体力值），然后该角色将武将牌翻面。",
            jjhyingzi:"英姿",
            "jjhyingzi_info":"摸牌阶段，你可以额外摸一张牌。",
            szhx:"水之呼吸",
            "szhx_info":"准备阶段，你可以进行判定，若结果为黑色则获得此判定牌，且可重复此流程直到出现红色的判定结果。你通过〖水之呼吸〗获得的牌，不计入当前回合的手牌上限。",
            zg:"斩鬼",
            "zg_info":"当场上有角色进入濒死状态时，你可以弃置一张酒或两张黑色手牌，则该角色立即死亡。",
            ly:"炼药",
            "ly_info":"你可以将一张黑色手牌当作【酒】使用。",
            sikao:"思考",
            "sikao_info":"出牌阶段开始时，你从三张锦囊牌中选择一张获得。",
            bengpao:"奔跑",
            "bengpao_info":"锁定技，其他角色计算与你的距离时+1。",
            jskz:"精神控制",
            "jskz_info":"出牌阶段限一次，你可以弃置一张牌，视为一名角色对另一名角色使用一张【决斗】（不可被【无懈可击】响应）。当你成为【杀】的目标时，你可以弃置一张牌并将此【杀】转移给攻击范围内的一名其他角色（不能是此【杀】的使用者或其他目标）。",
            "jskz2":"精神控制",
            "jskz2_info":"当你成为【杀】的目标时，你可以弃置一张牌并将此【杀】转移给攻击范围内的一名其他角色（不能是此【杀】的使用者或其他目标）。",
            ffengyin:"封印",
            "ffengyin_info":"锁定技，你使用装备牌无数量上限。当你使用装备牌后，你回复1点体力。当你失去一张装备区内的牌后，你失去1点体力，摸两张牌。",
            ffengnu:"封印",
            "ffengnu_info":"锁定技，当你失去一张装备区内的牌后，你失去1点体力，摸两张牌。",
            bbaoguang:"曝光",
            "bbaoguang_info":"锁定技，结束阶段，你失去1点体力。",
            dmliyong:"利用",
            "dmliyong_info":"出牌阶段，你可以交给一名其他角色一张【杀】，然后该角色下回合结束时失去1点体力。每回合限一次。",
            qiyue:"Gress",
            "qiyue_info":"出牌阶段限一次，你可以获得一名其他角色的所有手牌，回合结束时你为其每1点体力分配一张牌。每局游戏每名角色限一次。",
            "gress2":"Gress",
            "gress2_info":"",
            renfeng:"忍蜂",
            "renfeng_info":"当你使用【杀】指定目标后，你可以进行判定。若结果为红色，则此【杀】不可被闪避。",
            liushi:"流逝",
            "liushi_info":"锁定技，回合结束时，你失去1点体力上限。",
            chuanshou:"传授",
            "chuanshou_info":"出牌阶段，你可以将任意张手牌交给其他角色，你于回合内以此法交出第二张牌时回复1点体力。",
            dmyanwu:"炎舞",
            "dmyanwu_info":"锁定技，你区域内的黑桃牌和黑桃判定牌均视为红桃。当你使用红色【杀】造成伤害时，此伤害+1。",
            dmjiefeng:"解封",
            "dmjiefeng_info":"觉醒技，当你回复体力后，若你的体力值不小于12，你解除封印，获得〖恶魔之力〗。",
            emzl:"恶魔之力",
            "emzl_info":"摸牌阶段，你可以多摸X+1张牌。（X为你装备区里牌数的一半且向下取整）",
            shoutu:"收徒",
            "shoutu_info":"限定技，出牌阶段，你可以与场上一名角色形成【师徒】状态，你与该角色于摸牌阶段摸牌数+1。",
            dnskzd:"时空震荡",
            "dnskzd_info":"锁定技，回合结束时，你令随机一名其他角色失去1点体力。",
            jjpy:"拒绝平庸",
            "jjpy_info":"锁定技，当你成为一张指定了多个目标的【杀】或普通锦囊牌的目标时，你摸一张牌，令此牌对你无效。",
            dmzhuisha:"追杀",
            "dmzhuisha_info":"当你翻面时，你可以依次视为使用两张无距离与次数限制的【杀】。",
            dmfanteng:"翻腾",
            "dmfanteng_info":"锁定技，出牌阶段开始时，或你杀死一名其他角色后，你翻面。",
            "dmfanteng2":"翻腾",
            "dmfanteng2_info":"",
            suolongzhaoshi:"三刀流",
            "suolongzhaoshi_info":"当你使用【杀】指定目标后，你可以进行判定。若结果为红色，则此【杀】不可被闪避。",
            "shoutu2":"师徒",
            "shoutu2_info":"",
            "shoutu3":"师徒",
            "shoutu3_info":"",
            dmliangkuai:"凉快！",
            "dmliangkuai_info":"出牌阶段限一次，你可以弃置一张手牌(无牌则不弃)，然后随机获得一张装备牌。",
            dmkawayi:"卡哇伊！",
            "dmkawayi_info":"出牌阶段限一次，你可以弃置一张手牌(无牌则不弃)，然后随机获得一张锦囊牌。",
            dmlaoda:"老大！",
            "dmlaoda_info":"出牌阶段限一次，你可以弃置一张手牌(无牌则不弃)，然后随机获得一张基本牌。",
            dmcainiao:"菜鸟！",
            "dmcainiao_info":"限定技，出牌阶段，你可以获得一张【乐不思蜀】。",
            dmglzs:"攻略之神",
            "dmglzs_info":"锁定技，摸牌阶段，你额外摸X张牌，X为存活女性角色数(至多为3)。",
            dmszsj:"神之世界",
            "dmszsj_info":"锁定技，当你受到男性角色造成的伤害后，该角色本局视为女性。",
            dmtiaoxin:"挑衅",
            "dmtiaoxin_info":"回合结束时，你可以令一名其他角色下回合摸牌阶段少摸一张牌，出牌阶段【杀】造成的伤害+1，直到其回合结束。",
            dmshengqi:"愤怒",
            "dmshengqi_info":"摸牌阶段，你少摸一张牌。当你本回合内使用【杀】造成伤害时，此伤害+1。",
            "dmshengqi2":"愤怒",
            "dmshengqi2_info":"",
            dmsuibu:"碎步",
            "dmsuibu_info":"你可以将【杀】当做【闪】，或将【闪】当做【杀】使用或打出。",
            dmqsyz:"求生意志",
            "dmqsyz_info":"结束阶段，你可以摸X张牌（X为你已损失的体力值）。",
            dmszjw:"死之觉悟",
            "dmszjw_info":"锁定技，若你的手牌数为全场唯一最多，则当你造成或受到伤害时，此伤害+1。",
            dmzjsam:"这就是爱吗",
            "dmzjsam_info":"锁定技，你的【桃】和【酒】均视为【万箭齐发】。",
            "dmzjsam2":"这就是爱吗",
            "dmzjsam2_info":"",
            dmxingfen:"兴奋",
            "dmxingfen_info":"当你对距离1以内的一名角色造成1点伤害后，你可以回复1点体力或摸一张牌。",
            dmjihun:"汲魂",
            "dmjihun_info":"每当你受到1点伤害后，你可以获得伤害来源的一张牌。",
            dmyanling:"言灵",
            "dmyanling_info":"在一名角色的判定牌生效前，你可以打出一张牌替换之。",
            dmfuhuo:"复活",
            "dmfuhuo_info":"限定技，出牌阶段，你可以选择一名已死亡的其他角色，然后其满血复活。",
            dmbanjia:"板甲",
            "dmbanjia_info":"游戏开始时，你获得3点护甲，每1点护甲可以抵消1点伤害。",
            dmbaoguang:"曝光",
            "dmbaoguang_info":"锁定技，回合结束时，你失去1点体力。",
            dmbiange:"变革",
            "dmbiange_info":"限定技，出牌阶段，你可令除你外的所有角色依次对与其距离最近的另一名角色使用一张【杀】，否则失去1点体力。",
            dmyuhuo:"浴火",
            "dmyuhuo_info":"锁定技，当你受到火属性伤害时，你防止此伤害。",
            dmhxyyzsn:"害羞也要追杀你",
            "dmhxyyzsn_info":"锁定技，每当你成为杀的目标后，你摸两张牌并翻面。你使用【杀】没有距离与数量限制。",
            "dmhxyyzsn2":"害羞也要追杀你",
            "dmhxyyzsn2_info":"锁定技，出牌阶段，你使用【杀】没有数量限制。",
            dmgss:"鬼上身",
            "dmgss_info":"锁定技，当你受到伤害后，来源进入混乱状态直到回合结束。",
            "dmhxyyzsn3":"害羞也要追杀你",
            "dmhxyyzsn3_info":"出牌阶段限一次，你可以弃置一张牌，然后你的攻击范围视为无限直到回合结束。若你以此法弃置的牌为装备牌，则你可以弃置一名其他角色的一张牌。",
            dmhanyang:"涵养",
            "dmhanyang_info":"锁定技，你的手牌上限+1。",
        },
    },
    intro:"",
    author:"伶",
    diskURL:"",
    forumURL:"",
    version:"1.0",
},files:{"character":["dmyoulingji.jpg"],"card":[],"skill":[]}}})